Return-Path: <linux-btrfs+bounces-16804-lists+linux-btrfs=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-btrfs@lfdr.de
Delivered-To: lists+linux-btrfs@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [147.75.48.161])
	by mail.lfdr.de (Postfix) with ESMTPS id 49012B567C3
	for <lists+linux-btrfs@lfdr.de>; Sun, 14 Sep 2025 12:24:13 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id 8FDCE7A241E
	for <lists+linux-btrfs@lfdr.de>; Sun, 14 Sep 2025 10:22:33 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id F31AD243371;
	Sun, 14 Sep 2025 10:24:04 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (1024-bit key) header.d=bupt.moe header.i=@bupt.moe header.b="OAzuK+Ap"
X-Original-To: linux-btrfs@vger.kernel.org
Received: from smtpbgau2.qq.com (smtpbgau2.qq.com [54.206.34.216])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 9AC44231856
	for <linux-btrfs@vger.kernel.org>; Sun, 14 Sep 2025 10:23:57 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=54.206.34.216
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1757845444; cv=none; b=ELkNIcNeh478KaSoi8Icign6T9kfL6E8b3ZhW+5E0DJVi/NB6GDa2OT/HFjGyzDcQPM3f4a0Imk/zl0HxdiTAtJyUeO4dQsxFfsbW9w4TFm66fYcWbuzpSGcpIeQkM9JHRhCU9ZbDz4s4kaXCik/VJf1UruMr9PPr3gcFou67/I=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1757845444; c=relaxed/simple;
	bh=VNlWT6tKmFsBplXxLoD+D8aeE1lUuR7wV27FQoNOOmQ=;
	h=From:To:Subject:Mime-Version:Content-Type:Date:Message-ID; b=HlT/C6sIKZWUznQmOFVhhkhiesJdPu/8P61bzpVSj33jq2hXlc+ZnDmQ+qUyvZ8IUBC4uS8Bl4ZUvHWOrJVBNWM2Hf/V4dbAcZUjZa1BQsFfk0qh5hB7sKl3/Oo3dzGNb7NcYZY1TqUVu4d7gTYpCCUJ1W30YXwAfFAd3cz8AUY=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=bupt.moe; spf=pass smtp.mailfrom=bupt.moe; dkim=pass (1024-bit key) header.d=bupt.moe header.i=@bupt.moe header.b=OAzuK+Ap; arc=none smtp.client-ip=54.206.34.216
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=bupt.moe
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=bupt.moe
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=bupt.moe;
	s=qqmb2301; t=1757845429;
	bh=VNlWT6tKmFsBplXxLoD+D8aeE1lUuR7wV27FQoNOOmQ=;
	h=From:To:Subject:Mime-Version:Date:Message-ID;
	b=OAzuK+ApyRFcA1k4xBJYTk/VqTRL52vGcU0sFP8JNnhmPRHO4gNBxYwYn8xBaG87m
	 iwvfT1CifNkZ03uadGqxM4SL/exeZC+34mpuYSjiCb1XJtwinOsE7ym8ijLLR7ayU/
	 RTMU4dqjcbS61tPes6qi3gVv1TZY0QXFIGOjNQ5o=
EX-QQ-RecipientCnt: 1
X-QQ-GoodBg: 2
X-QQ-SSF: 00400000000000F0
X-QQ-FEAT: D4aqtcRDiqTSsxwgbpkr0P/mZ1UFwmcXEFSggxm2qDk=
X-QQ-BUSINESS-ORIGIN: 2
X-QQ-Originating-IP: GprDNPuSN0PQ1Ul20BljITRiizc1rYiBhMZQTcw/naE=
X-QQ-STYLE: 
X-QQ-mid: lv2gz5a-1t1757845428tc3bc87bc
From: "=?utf-8?B?SEFOIFl1d2Vp?=" <hrx@bupt.moe>
To: "=?utf-8?B?bGludXgtYnRyZnM=?=" <linux-btrfs@vger.kernel.org>
Subject: performance issue when using zoned.
Precedence: bulk
X-Mailing-List: linux-btrfs@vger.kernel.org
List-Id: <linux-btrfs.vger.kernel.org>
List-Subscribe: <mailto:linux-btrfs+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-btrfs+unsubscribe@vger.kernel.org>
Mime-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Date: Sun, 14 Sep 2025 18:23:47 +0800
X-Priority: 3
Message-ID: <tencent_694B88D85481319043E0CE14@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-BIZMAIL-ID: 6988480560255495806
X-QQ-SENDSIZE: 520
Received: from qq.com (unknown [127.0.0.1])
	by smtp.qq.com (ESMTP) with SMTP
	id ; Sun, 14 Sep 2025 18:23:48 +0800 (CST)
Feedback-ID: lv:bupt.moe:qybglogicsvrsz:qybglogicsvrsz4a-0
X-QQ-XMAILINFO: OayJuUA+4kD+KL4TFjHTdxW+3qb47VgitsVfd904yfCxg52RIZhNVvQV
	K/XijVzuHLExROsW10rbkVNJp0MWO2rTD1KmWzBskFDlHmYw8Mdd39k4P1hK2cpQA5e1WBg
	5kF9kf0nA/napl51WYtzqqJLMNKitrNtwOovB+AgweX7e/fcZ7S+NdiiNn4B3X/kiXK6YIG
	bZuBCJ+8L3lqLaP0xzJcpqIrIdTdOLK9mKq/xh6RY6yMHD11JJH4bPGaTowd88DTG4zj3Gh
	hzuMwxGyV2WCO+c+qkaWT6R64JRruqwDIAEfpaz03PFhi2RllLbkMOoIQaDY0+SgJ4ALggr
	xSA6ldVx4k7oNANLrJaLp5UdDfdCPSA9i0iiNwjhvg3f38S1LtcYJE0IWbLt133HdsoKsYC
	qffIrY0gVVurdah4nNik9aiQ0zb67XlzDhnmdQI26pih4A4SQW0RVUYkquHg/VDL06OgMjf
	r5oh/KA5muL1D7IiTWxn8grax1nr2zQ2kEP1EqVhoiUanpCY/d+kpyUFyrJgpjntJBxi0qp
	6iuGMsVpbdPUcAPqlbRVPzSxTSKfeT0Yc7ojIELKaEgD4Jl4nIKzl1JNoUYkH/RBNrqnSxn
	zIEV6lqSCT30SLLWEwTQ9JyID7tXr2itJoorkSzxXAo11cIaPIYUK+hQ/dehLwXuM+KjcXq
	84RC4XBa8oP1gWL4fWbMdaFbCz8lfvNZh7X93KLO9YvCkWD+a6d7mhBZs88eafVnq50zcbN
	/r7sB1uvZO2tz/PnvWm3bH2TSiA/Yipr+TiKd6tXnwDsOolnjtE5+xflJfJ8vIKIP61rdDm
	R5Y8fJA82a2tcmvKVPvsLKbPJdmBND2JDQzWKLwHd8M3z4580O6LbGKLS2jcDNeiR3maWwl
	FGK7SZPjbgBkh60W/Is7js0KBhPPjhi+CAggj/m734FDFmtkakW/9kbO11ONl9kr2Avbrfc
	gDWJ+NOya/jqywD6hTJ4Huolegh5FtVHrREd1ewmtLWM/4YDaSrkGoIXqI+OcVWtkbVT9Sj
	9pFuvm5w==
X-QQ-XMRINFO: NI4Ajvh11aEj8Xl/2s1/T8w=
X-QQ-RECHKSPAM: 0

SGksDQpJIGFtIGV4cGVyaWVuY2luZyBwZXJmb3JtYW5jZSBpc3N1ZSB3aGVuIGNvcHlpbmcg
YmlnIGZpbGVzIHRvIHpvbmVkIGJ0cmZzIHZvbHVtZS4NCldoZW4gdXNpbmcgY3AgLXIgZm9y
IGNvcHkgZmlsZXMsIGl0IGFjaGlldmVkIGFib3V0IH4zNU1CL3Mgc3BlZWQuDQpJIHdvbmRl
ciBpcyB0aGVyZSBhbnkgdG9vbHMgb3IgdGVjaG5pcXVlcyBJIGNhbiB1c2UgdG8gcGVyZiBi
dHJmcy4NCg0KVGhlcmUgaXMgbXkgYnRyZnMgdm9sdW1lOg0KT3ZlcmFsbDoNCiAgICBEZXZp
Y2Ugc2l6ZTogICAgICAgICAgICAgICAgICAxMi43M1RpQg0KICAgIERldmljZSBhbGxvY2F0
ZWQ6ICAgICAgICAgICAgIDExLjExVGlCDQogICAgRGV2aWNlIHVuYWxsb2NhdGVkOiAgICAg
ICAgICAgIDEuNjJUaUINCiAgICBEZXZpY2UgbWlzc2luZzogICAgICAgICAgICAgICAgICAw
LjAwQg0KICAgIERldmljZSBzbGFjazogICAgICAgICAgICAgICAgICAgIDAuMDBCDQogICAg
RGV2aWNlIHpvbmUgdW51c2FibGU6ICAgICAgICAgIDkuOTZHaUINCiAgICBEZXZpY2Ugem9u
ZSBzaXplOiAgICAgICAgICAgIDI1Ni4wME1pQg0KICAgIFVzZWQ6ICAgICAgICAgICAgICAg
ICAgICAgICAgIDExLjA4VGlCDQogICAgRnJlZSAoZXN0aW1hdGVkKTogICAgICAgICAgICAg
IDEuNjNUaUIgICAgICAobWluOiA4NDEuNDRHaUIpDQogICAgRnJlZSAoc3RhdGZzLCBkZik6
ICAgICAgICAgICAgIDEuNjNUaUINCiAgICBEYXRhIHJhdGlvOiAgICAgICAgICAgICAgICAg
ICAgICAgMS4wMA0KICAgIE1ldGFkYXRhIHJhdGlvOiAgICAgICAgICAgICAgICAgICAyLjAw
DQogICAgR2xvYmFsIHJlc2VydmU6ICAgICAgICAgICAgICA1MTIuMDBNaUIgICAgICAodXNl
ZDogMTYuMDBLaUIpDQogICAgTXVsdGlwbGUgcHJvZmlsZXM6ICAgICAgICAgICAgICAgICAg
bm8NCg0KRGF0YSxzaW5nbGU6IFNpemU6MTEuMDdUaUIsIFVzZWQ6MTEuMDZUaUIgKDk5Ljg5
JSkNCiAgIC9kZXYvc2RjICAgICAgIDExLjA3VGlCDQoNCk1ldGFkYXRhLERVUDogU2l6ZToy
My4wMEdpQiwgVXNlZDoxMy4zMUdpQiAoNTcuODclKQ0KICAgL2Rldi9zZGMgICAgICAgNDYu
NTBHaUINCg0KU3lzdGVtLERVUDogU2l6ZToyNTYuMDBNaUIsIFVzZWQ6NC42Mk1pQiAoMS44
MSUpDQogICAvZGV2L3NkYyAgICAgIDUxMi4wME1pQg0KDQpVbmFsbG9jYXRlZDoNCiAgIC9k
ZXYvc2RjICAgICAgICAxLjYyVGlCDQoNClRlc3RpbmcgcmVzdWx0IHdpdGggc2FtZSBtb2Rl
bCBvbiBzYW1lIG1hY2hpbmUgKG5vdCBzYW1lIGRldmljZSBzaW5jZSBJIGFtIHVzaW5nIGl0
KS4NCg0KIyBmaW8gLS1uYW1lPXpiYyAtLWZpbGVuYW1lPS9kZXYvc2RhIC0tZGlyZWN0PTEg
LS16b25lbW9kZT16YmQgLS1vZmZzZXQ9OTg2NzE1MDQ5MTY0OCAtLXNpemU9MTZHIC0taW9l
bmdpbmU9bGliYWlvIC0taW9kZXB0aD0xIC0tcnc9d3JpdGUgLS1icz0yNTZrDQp6YmM6IChn
PTApOiBydz13cml0ZSwgYnM9KFIpIDI1NktpQi0yNTZLaUIsIChXKSAyNTZLaUItMjU2S2lC
LCAoVCkgMjU2S2lCLTI1NktpQiwgaW9lbmdpbmU9bGliYWlvLCBpb2RlcHRoPTENCmZpby0z
LjM5DQpTdGFydGluZyAxIHByb2Nlc3MNCkpvYnM6IDEgKGY9MCk6IFtmKDEpXVsxMDAuMCVd
W3c9MTYxTWlCL3NdW3c9NjQ0IElPUFNdW2V0YSAwMG06MDBzXQ0KemJjOiAoZ3JvdXBpZD0w
LCBqb2JzPTEpOiBlcnI9IDA6IHBpZD01OTIzNDogU3VuIFNlcCAxNCAxNjozNDo0OSAyMDI1
DQogIHdyaXRlOiBJT1BTPTY1NiwgQlc9MTY0TWlCL3MgKDE3Mk1CL3MpKDE2LjBHaUIvOTk4
Mzdtc2VjKTsgMjQgem9uZSByZXNldHMNCiAgICBzbGF0ICh1c2VjKTogbWluPTEwLCBtYXg9
MTI3LCBhdmc9MzguMDMsIHN0ZGV2PTE4LjQ4DQogICAgY2xhdCAodXNlYyk6IG1pbj00NjUs
IG1heD01OTcwMCwgYXZnPTE0NzIuODAsIHN0ZGV2PTIxMzIuNjYNCiAgICAgbGF0ICh1c2Vj
KTogbWluPTUyNSwgbWF4PTU5NzM3LCBhdmc9MTUxMC44Mywgc3RkZXY9MjEzMi40MQ0KICAg
IGNsYXQgcGVyY2VudGlsZXMgKHVzZWMpOg0KICAgICB8ICAxLjAwdGg9WyAgNTEwXSwgIDUu
MDB0aD1bICA1MTVdLCAxMC4wMHRoPVsgIDUxOV0sIDIwLjAwdGg9WyAxMjM3XSwNCiAgICAg
fCAzMC4wMHRoPVsgMTI4N10sIDQwLjAwdGg9WyAxMzM2XSwgNTAuMDB0aD1bIDEzNTJdLCA2
MC4wMHRoPVsgMTM4NV0sDQogICAgIHwgNzAuMDB0aD1bIDE0MThdLCA4MC4wMHRoPVsgMTUw
MF0sIDkwLjAwdGg9WyAxODYwXSwgOTUuMDB0aD1bIDE5MDldLA0KICAgICB8IDk5LjAwdGg9
WyAyMTE0XSwgOTkuNTB0aD1bMjQ3NzNdLCA5OS45MHRoPVsyNzY1N10sIDk5Ljk1dGg9WzI3
NjU3XSwNCiAgICAgfCA5OS45OXRoPVszMDU0MF0NCiAgIGJ3ICggIEtpQi9zKTogbWluPTE0
MjMzNiwgbWF4PTE4NzM5MiwgcGVyPTEwMC4wMCUsIGF2Zz0xNjgxNTIuOTMsIHN0ZGV2PTkz
ODcuNDYsIHNhbXBsZXM9MTk5DQogICBpb3BzICAgICAgICA6IG1pbj0gIDU1NiwgbWF4PSAg
NzMyLCBhdmc9NjU2Ljg0LCBzdGRldj0zNi42Nywgc2FtcGxlcz0xOTkNCiAgbGF0ICh1c2Vj
KSAgIDogNTAwPTAuMDIlLCA3NTA9MTcuODUlLCAxMDAwPTAuMjQlDQogIGxhdCAobXNlYykg
ICA6IDI9NzkuMzYlLCA0PTEuNjMlLCAxMD0wLjE1JSwgMjA9MC4wMiUsIDUwPTAuNzMlDQog
IGxhdCAobXNlYykgICA6IDEwMD0wLjAxJQ0KICBjcHUgICAgICAgICAgOiB1c3I9MC4zMSUs
IHN5cz0yLjY5JSwgY3R4PTY1NjIwLCBtYWpmPTAsIG1pbmY9MTMNCiAgSU8gZGVwdGhzICAg
IDogMT0xMDAuMCUsIDI9MC4wJSwgND0wLjAlLCA4PTAuMCUsIDE2PTAuMCUsIDMyPTAuMCUs
ID49NjQ9MC4wJQ0KICAgICBzdWJtaXQgICAgOiAwPTAuMCUsIDQ9MTAwLjAlLCA4PTAuMCUs
IDE2PTAuMCUsIDMyPTAuMCUsIDY0PTAuMCUsID49NjQ9MC4wJQ0KICAgICBjb21wbGV0ZSAg
OiAwPTAuMCUsIDQ9MTAwLjAlLCA4PTAuMCUsIDE2PTAuMCUsIDMyPTAuMCUsIDY0PTAuMCUs
ID49NjQ9MC4wJQ0KICAgICBpc3N1ZWQgcnd0czogdG90YWw9MCw2NTUzNiwwLDAgc2hvcnQ9
MCwwLDAsMCBkcm9wcGVkPTAsMCwwLDANCiAgICAgbGF0ZW5jeSAgIDogdGFyZ2V0PTAsIHdp
bmRvdz0wLCBwZXJjZW50aWxlPTEwMC4wMCUsIGRlcHRoPTENCg0KUnVuIHN0YXR1cyBncm91
cCAwIChhbGwgam9icyk6DQogIFdSSVRFOiBidz0xNjRNaUIvcyAoMTcyTUIvcyksIDE2NE1p
Qi9zLTE2NE1pQi9zICgxNzJNQi9zLTE3Mk1CL3MpLCBpbz0xNi4wR2lCICgxNy4yR0IpLCBy
dW49OTk4MzctOTk4Mzdtc2VjDQoNCkRpc2sgc3RhdHMgKHJlYWQvd3JpdGUpOg0KICBzZGE6
IGlvcz0wLzY1NDA1LCBzZWN0b3JzPTAvMzM0NzUwNzIsIG1lcmdlPTAvMCwgdGlja3M9MC85
ODA2OSwgaW5fcXVldWU9OTgwNzAsIHV0aWw9OTguMzIlDQoNCmRkIHJlc3VsdC4gVGhlIGVy
cm9yIGlzIGJlY2F1c2UgSSBmb3Jnb3QgdG8gcmVzZXQgem9uZXMgaW50ZW5kZWQgdG8gYmUg
d3JpdHRlbi4NCg0KZGQgaWY9L2Rldi96ZXJvIG9mPS9kZXYvc2RhIHNlZWs9Mzc2NDAxOTIg
YnM9MjU2ayBvZmxhZz1zeW5jDQpkZDogZXJyb3Igd3JpdGluZyAnL2Rldi9zZGEnOiBJbnB1
dC9vdXRwdXQgZXJyb3INCjMwNzIxKzAgcmVjb3JkcyBpbg0KMzA3MjArMCByZWNvcmRzIG91
dA0KODA1MzA2MzY4MCBieXRlcyAoOC4xIEdCLCA3LjUgR2lCKSBjb3BpZWQsIDMwMi45MTQg
cywgMjYuNiBNQi9z


