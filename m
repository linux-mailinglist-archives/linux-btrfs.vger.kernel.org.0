Return-Path: <linux-btrfs-owner@vger.kernel.org>
X-Original-To: lists+linux-btrfs@lfdr.de
Delivered-To: lists+linux-btrfs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id CD2CB362C5C
	for <lists+linux-btrfs@lfdr.de>; Sat, 17 Apr 2021 02:17:02 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S235010AbhDQART (ORCPT <rfc822;lists+linux-btrfs@lfdr.de>);
        Fri, 16 Apr 2021 20:17:19 -0400
Received: from mout.gmx.net ([212.227.17.20]:57267 "EHLO mout.gmx.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S231997AbhDQART (ORCPT <rfc822;linux-btrfs@vger.kernel.org>);
        Fri, 16 Apr 2021 20:17:19 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=gmx.net;
        s=badeba3b8450; t=1618618611;
        bh=GA1uJHlt6864we7jXYUgSG9iLoxGtQdwpFY9grD+q2c=;
        h=X-UI-Sender-Class:Subject:To:References:From:Date:In-Reply-To;
        b=MLEM8hWchiede9t/1jPTnoFbCcw6JIG1CL82MbBXe7s0z3PRwLRSb22z5v5OhCDoZ
         VWf3+NGUGYdy863YeEnHLWExiwo9mJ87cYSbvrwcAVef2zdINhKNcB1obrkOmkqn5V
         8ieD9LsQsUxiQJBOHpNGgKjDGpxbiXei72X7r+HM=
X-UI-Sender-Class: 01bb95c1-4bf8-414a-932a-4f6e2808ef9c
Received: from [0.0.0.0] ([149.28.201.231]) by mail.gmx.net (mrgmx104
 [212.227.17.174]) with ESMTPSA (Nemesis) id 1N79u8-1lb2cg2IiS-017V9S; Sat, 17
 Apr 2021 02:16:51 +0200
Subject: Re: [PATCH 17/42] btrfs: only require sector size alignment for
 end_bio_extent_writepage()
To:     Josef Bacik <josef@toxicpanda.com>, Qu Wenruo <wqu@suse.com>,
        linux-btrfs@vger.kernel.org
References: <20210415050448.267306-1-wqu@suse.com>
 <20210415050448.267306-18-wqu@suse.com>
 <53cea2cc-3ff8-a005-650a-c5b188e96659@toxicpanda.com>
From:   Qu Wenruo <quwenruo.btrfs@gmx.com>
Message-ID: <d3d6bb75-de1b-fa85-6611-3b4770c6dda6@gmx.com>
Date:   Sat, 17 Apr 2021 08:16:47 +0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101
 Thunderbird/78.9.0
MIME-Version: 1.0
In-Reply-To: <53cea2cc-3ff8-a005-650a-c5b188e96659@toxicpanda.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Language: en-US
Content-Transfer-Encoding: base64
X-Provags-ID: V03:K1:3RrOpISpvIXznjEVCkqdnUp1MZUbODdj8xcKWlYbga7JN5PrvAF
 f0XngA7MHl4nWtOBGDw7WitwxZ2G9i+EzahpwFsru3l1GvgBTapgCkXg2PwA9wzqUHXAa3z
 knxJ8/2b4LVWisd5zD4lxFGnUQNE3DADIuK4ieROCpYY5H2rGgXzrkr+FGYNsbTSLqcdmUp
 S6X5uT8rkx/WfWIYwy3Hw==
X-Spam-Flag: NO
X-UI-Out-Filterresults: notjunk:1;V03:K0:MCI4tHYz3lI=:riR8Bx4QfmOQwMiaMhiF/1
 f4427fH+MR44nSd/eSkFFLZj6yK1P2bQMad0ScmA6JkfS0XES/rwS2kGxrKC6rokaQu1XCbb5
 bZYU4VBURWFNjMJS2T5YIFV7S8fKU/T2Im9INkKlVsZMb9WzWe0mD2vd1ugjX7YBSTF/yOnvp
 MoFVbvoEKp8deDhxD4OlaED7X65xo3jzQZYtyNIZODcqOcwjuea8FMzq+h6l1ARwswNqls1A3
 ufQCVT1iw5+DyRxRwzDyLgZwCufvjNmQ4bZOgrCduoXo7nDj0Rt76Q5qijlVVNocTH0OmVpva
 5iE6JY8td7MYTR8Rc69f4AIoPRpr1qPgO7w0Z4jjaRVYlkMWjdBWyZ7khnYMxWOMFkqtRxEsy
 CyAmLZTOsbB4v7Whxyb9RF5w8FrwCuTjBIizVX4hngxgfKzSXILHnladioZrpNcuQk2NA6Kgq
 cUl2XgV9WScpp09yMrIsWjhTLHYxB2CHhk89psOrkEl14sfVINDM4aN9jFA6Mj29AWx4pcnSo
 Nd4mg6qt7N/z1yDJB4jP5bw7UpGthZdx5rciCy+XZgmfZD55FleL9Y0jNkJNASqNtYWHBUG6r
 TbfUtNuhVk2uMvOefbaX8sBDB3Mphj7NHhFdib3g4s6V+K3xTctaM08B6UAaJyM9uePzw92Y9
 locq89vnOpgphskdGTOj39VXNAJt/tAU1j0wEp2LfCRht/PG1SjCQ2r664PrvjRB38Y4uQ5Qk
 vy6C9/28aHjTkfXgTqEZQ96p6REMyoJa1mBCGP4z6ufaXqtUI7+o6ldkfvAOc1r9Bq2sdABh8
 qAwB3A7bIfNt1QkFRK9MJ9xr0BXGSwUw1LeZjKRhPTsvlT690N4t+5fIbHREg/WywAV/a3K5+
 vRUiM/ttc8CVwX/NF932AhQG+VfYPxYA+ByKohr8YFH5T5X1pHeZOf9hIv7l+fE3qhOURqoFq
 2oN24/op9UVd2lqYdjcE5IgGSxbhbHsH9IC89d5HmcC4eW/YBy8td5QWZ3r+HJJD9rFpdRKxr
 jtWZpcSKJ+hP/hL1FEtk7fepnEWziTxi4UzrETubFI9TyMAH/jt4KAYXMpPipV+VoCzIZj3Ni
 PpesK9/z4ouZwniaj4Gls2CDwlTcftAzUJuiKJri5pBxDS03yx66lRjAY7UOnrbbvy66IBstF
 AY0/S54kNTf3uW7eb4XbEjxhMPtJlXKGzBtj4FY6VmtRk9Ccnq+cR6tv+T3Yndcq9yQ+FKWbj
 HpFot/kyXGqrWBwx2
Precedence: bulk
List-ID: <linux-btrfs.vger.kernel.org>
X-Mailing-List: linux-btrfs@vger.kernel.org

DQoNCk9uIDIwMjEvNC8xNiDkuIvljYgxMToxMywgSm9zZWYgQmFjaWsgd3JvdGU6DQo+IE9uIDQv
MTUvMjEgMTowNCBBTSwgUXUgV2VucnVvIHdyb3RlOg0KPj4gSnVzdCBsaWtlIHJlYWQgcGFnZSwg
Zm9yIHN1YnBhZ2Ugc3VwcG9ydCB3ZSBvbmx5IHJlcXVpcmUgc2VjdG9yIHNpemUNCj4+IGFsaWdu
bWVudC4NCj4+DQo+PiBTbyBjaGFuZ2UgdGhlIGVycm9yIG1lc3NhZ2UgY29uZGl0aW9uIHRvIG9u
bHkgcmVxdWlyZSBzZWN0b3IgYWxpZ25tZW50Lg0KPj4NCj4+IFRoaXMgc2hvdWxkIG5vdCBhZmZl
Y3QgZXhpc3RpbmcgY29kZSwgYXMgZm9yIHJlZ3VsYXIgc2VjdG9yc2l6ZSA9PQ0KPj4gUEFHRV9T
SVpFIGNhc2UsIHdlIGFyZSBzdGlsbCByZXF1aXJpbmcgcGFnZSBhbGlnbm1lbnQuDQo+Pg0KPj4g
U2lnbmVkLW9mZi1ieTogUXUgV2VucnVvIDx3cXVAc3VzZS5jb20+DQo+PiAtLS0NCj4+IMKgIGZz
L2J0cmZzL2V4dGVudF9pby5jIHwgMjkgKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0NCj4+
IMKgIDEgZmlsZSBjaGFuZ2VkLCAxMiBpbnNlcnRpb25zKCspLCAxNyBkZWxldGlvbnMoLSkNCj4+
DQo+PiBkaWZmIC0tZ2l0IGEvZnMvYnRyZnMvZXh0ZW50X2lvLmMgYi9mcy9idHJmcy9leHRlbnRf
aW8uYw0KPj4gaW5kZXggNTNhYzIyZTM1NjBmLi45NGY4YjNmZmU2YTcgMTAwNjQ0DQo+PiAtLS0g
YS9mcy9idHJmcy9leHRlbnRfaW8uYw0KPj4gKysrIGIvZnMvYnRyZnMvZXh0ZW50X2lvLmMNCj4+
IEBAIC0yNzc5LDI1ICsyNzc5LDIwIEBAIHN0YXRpYyB2b2lkIGVuZF9iaW9fZXh0ZW50X3dyaXRl
cGFnZShzdHJ1Y3QgDQo+PiBiaW8gKmJpbykNCj4+IMKgwqDCoMKgwqDCoMKgwqDCoCBzdHJ1Y3Qg
cGFnZSAqcGFnZSA9IGJ2ZWMtPmJ2X3BhZ2U7DQo+PiDCoMKgwqDCoMKgwqDCoMKgwqAgc3RydWN0
IGlub2RlICppbm9kZSA9IHBhZ2UtPm1hcHBpbmctPmhvc3Q7DQo+PiDCoMKgwqDCoMKgwqDCoMKg
wqAgc3RydWN0IGJ0cmZzX2ZzX2luZm8gKmZzX2luZm8gPSBidHJmc19zYihpbm9kZS0+aV9zYik7
DQo+PiArwqDCoMKgwqDCoMKgwqAgY29uc3QgdTMyIHNlY3RvcnNpemUgPSBmc19pbmZvLT5zZWN0
b3JzaXplOw0KPj4gLcKgwqDCoMKgwqDCoMKgIC8qIFdlIGFsd2F5cyBpc3N1ZSBmdWxsLXBhZ2Ug
cmVhZHMsIGJ1dCBpZiBzb21lIGJsb2NrDQo+PiAtwqDCoMKgwqDCoMKgwqDCoCAqIGluIGEgcGFn
ZSBmYWlscyB0byByZWFkLCBibGtfdXBkYXRlX3JlcXVlc3QoKSB3aWxsDQo+PiAtwqDCoMKgwqDC
oMKgwqDCoCAqIGFkdmFuY2UgYnZfb2Zmc2V0IGFuZCBhZGp1c3QgYnZfbGVuIHRvIGNvbXBlbnNh
dGUuDQo+PiAtwqDCoMKgwqDCoMKgwqDCoCAqIFByaW50IGEgd2FybmluZyBmb3Igbm9uemVybyBv
ZmZzZXRzLCBhbmQgYW4gZXJyb3INCj4+IC3CoMKgwqDCoMKgwqDCoMKgICogaWYgdGhleSBkb24n
dCBhZGQgdXAgdG8gYSBmdWxsIHBhZ2UuwqAgKi8NCj4+IC3CoMKgwqDCoMKgwqDCoCBpZiAoYnZl
Yy0+YnZfb2Zmc2V0IHx8IGJ2ZWMtPmJ2X2xlbiAhPSBQQUdFX1NJWkUpIHsNCj4+IC3CoMKgwqDC
oMKgwqDCoMKgwqDCoMKgIGlmIChidmVjLT5idl9vZmZzZXQgKyBidmVjLT5idl9sZW4gIT0gUEFH
RV9TSVpFKQ0KPj4gLcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBidHJmc19lcnIoZnNf
aW5mbywNCj4+IC3CoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgInBhcnRpYWwg
cGFnZSB3cml0ZSBpbiBidHJmcyB3aXRoIG9mZnNldCAldSBhbmQgDQo+PiBsZW5ndGggJXUiLA0K
Pj4gLcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGJ2ZWMtPmJ2X29mZnNl
dCwgYnZlYy0+YnZfbGVuKTsNCj4+IC3CoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGVsc2UNCj4+IC3C
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgYnRyZnNfaW5mbyhmc19pbmZvLA0KPj4gLcKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCAiaW5jb21wbGV0ZSBwYWdlIHdyaXRl
IGluIGJ0cmZzIHdpdGggb2Zmc2V0ICV1IGFuZCANCj4+IGxlbmd0aCAldSIsDQo+PiAtwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgYnZlYy0+YnZfb2Zmc2V0LCBidmVjLT5i
dl9sZW4pOw0KPj4gLcKgwqDCoMKgwqDCoMKgIH0NCj4+ICvCoMKgwqDCoMKgwqDCoCAvKiBCdHJm
cyByZWFkIHdyaXRlIHNob3VsZCBhbHdheXMgYmUgc2VjdG9yIGFsaWduZWQuICovDQo+PiArwqDC
oMKgwqDCoMKgwqAgaWYgKCFJU19BTElHTkVEKGJ2ZWMtPmJ2X29mZnNldCwgc2VjdG9yc2l6ZSkp
DQo+PiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBidHJmc19lcnIoZnNfaW5mbywNCj4+ICvCoMKg
wqDCoMKgwqDCoCAicGFydGlhbCBwYWdlIHdyaXRlIGluIGJ0cmZzIHdpdGggb2Zmc2V0ICV1IGFu
ZCBsZW5ndGggJXUiLA0KPj4gK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgYnZl
Yy0+YnZfb2Zmc2V0LCBidmVjLT5idl9sZW4pOw0KPj4gK8KgwqDCoMKgwqDCoMKgIGVsc2UgaWYg
KCFJU19BTElHTkVEKGJ2ZWMtPmJ2X2xlbiwgc2VjdG9yc2l6ZSkpDQo+PiArwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoCBidHJmc19pbmZvKGZzX2luZm8sDQo+PiArwqDCoMKgwqDCoMKgwqAgImluY29t
cGxldGUgcGFnZSB3cml0ZSB3aXRoIG9mZnNldCAldSBhbmQgbGVuZ3RoICV1IiwNCj4+ICvCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgYnZlYy0+YnZfb2Zmc2V0LCBidmVjLT5i
dl9sZW4pOw0KPj4gLcKgwqDCoMKgwqDCoMKgIHN0YXJ0ID0gcGFnZV9vZmZzZXQocGFnZSk7DQo+
PiAtwqDCoMKgwqDCoMKgwqAgZW5kID0gc3RhcnQgKyBidmVjLT5idl9vZmZzZXQgKyBidmVjLT5i
dl9sZW4gLSAxOw0KPj4gK8KgwqDCoMKgwqDCoMKgIHN0YXJ0ID0gcGFnZV9vZmZzZXQocGFnZSkg
KyBidmVjLT5idl9vZmZzZXQ7DQo+PiArwqDCoMKgwqDCoMKgwqAgZW5kID0gc3RhcnQgKyBidmVj
LT5idl9sZW4gLSAxOw0KPiANCj4gRG9lcyB0aGlzIGJpdCB3b3JrIG91dCBmb3IgeW91IG5vdz8N
Cg0KQXQgbGVhc3QgZ2VuZXJpYyBwYXNzZXMgaGVyZSBmb3IgbXkgYXJtIGJvYXJkLg0KDQo+wqAg
QmVjYXVzZSBiZWZvcmUgc3RhcnQgd2FzIGp1c3QgdGhlIA0KPiBwYWdlIG9mZnNldC7CoCBDbGVh
cmx5IHRoZSB3YXkgaXQgd2FzIGJlZm9yZSBpcyBhIGJ1ZyAoSSB0aGluaz8pLCBiZWNhdXNlIA0K
PiBpdCBnZXRzIHVzZWQgaW4gYnRyZnNfd3JpdGVwYWdlX2VuZGlvX2ZpbmlzaF9vcmRlcmVkKCkg
d2l0aCB0aGUgDQo+IHN0YXJ0K2xlbiwgc28geW91IHJlYWxseSBkbyB3YW50IHN0YXJ0ID0gcGFn
ZV9vZmZzZXQocGFnZSkgKyBidl9vZmZzZXQuICANCg0KTm90IGEgYnVnIGJlZm9yZSwgYXMgZm9y
IHNlY3RvcnNpemUgPT0gUEFHRV9TSVpFIGNhc2UsIGFsbCBidmVjIGhhcyANCmJ2X29mZnNldCA9
PSAwIGFuZCBidl9sZW4gPT0gUEFHRV9TSVpFLg0KDQpUaGFua3MsDQpRdQ0KDQo+IEJ1dCB0aGlz
IGlzIGEgYmVoYXZpb3IgY2hhbmdlIHRoYXQgd2FycmFudHMgYSBwYXRjaCBvZiBpdHMgb3duIGFz
IGl0J3MgDQo+IHVucmVsYXRlZCB0byB0aGUgc2VjdG9yc2l6ZSBjaGFuZ2UuwqAgKFllcyBJIHJl
YWxpemUgSSdtIGFza2luZyBmb3IgbW9yZSANCj4gcGF0Y2hlcyBpbiBhbiBhbHJlYWR5IGh1Z2Ug
c2VyaWVzLCB5ZXMgSSdtIGluc2FuZS4pIFRoYW5rcywNCj4gDQo+IEpvc2VmDQo=
