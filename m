Return-Path: <linux-btrfs-owner@vger.kernel.org>
X-Original-To: lists+linux-btrfs@lfdr.de
Delivered-To: lists+linux-btrfs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id A409534BC15
	for <lists+linux-btrfs@lfdr.de>; Sun, 28 Mar 2021 12:57:27 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229577AbhC1K4b (ORCPT <rfc822;lists+linux-btrfs@lfdr.de>);
        Sun, 28 Mar 2021 06:56:31 -0400
Received: from out20-62.mail.aliyun.com ([115.124.20.62]:47686 "EHLO
        out20-62.mail.aliyun.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229503AbhC1K4Q (ORCPT
        <rfc822;linux-btrfs@vger.kernel.org>);
        Sun, 28 Mar 2021 06:56:16 -0400
X-Alimail-AntiSpam: AC=CONTINUE;BC=0.09063169|-1;CH=green;DM=|CONTINUE|false|;DS=CONTINUE|ham_social|0.0326857-0.000867155-0.966447;FP=0|0|0|0|0|0|0|0;HT=ay29a033018047199;MF=wangyugui@e16-tech.com;NM=1;PH=DS;RN=1;RT=1;SR=0;TI=SMTPD_---.JrUBj3u_1616928969;
Received: from 192.168.2.112(mailfrom:wangyugui@e16-tech.com fp:SMTPD_---.JrUBj3u_1616928969)
          by smtp.aliyun-inc.com(10.147.42.241);
          Sun, 28 Mar 2021 18:56:09 +0800
Date:   Sun, 28 Mar 2021 18:56:10 +0800
From:   Wang Yugui <wangyugui@e16-tech.com>
To:     linux-btrfs@vger.kernel.org
Subject: Re: xfstests generic/476 failed on btrfs(errno=-12 Out of memory, kernel 5.11.10)
In-Reply-To: <20210327230400.844B.409509F4@e16-tech.com>
References: <20210327181911.FC01.409509F4@e16-tech.com> <20210327230400.844B.409509F4@e16-tech.com>
Message-Id: <20210328185609.D969.409509F4@e16-tech.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="------_60605F5F00000000D964_MULTIPART_MIXED_"
Content-Transfer-Encoding: 7bit
X-Mailer: Becky! ver. 2.75.03 [en]
Precedence: bulk
List-ID: <linux-btrfs.vger.kernel.org>
X-Mailing-List: linux-btrfs@vger.kernel.org

--------_60605F5F00000000D964_MULTIPART_MIXED_
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,

> kmem_cache_zalloc() without __GFP_NOFAIL may fail.
> 
> btrfs use kmem_cache_zalloc() with GFP_NOFS mostly, 
> and only few place with __GFP_NOFAIL.
> 
> xfs use kmem_cache_zalloc() with __GFP_NOFAIL mostly.
> 
> It is very difficult to test all case of failure in kmem_cache_zalloc() .
> 
> Should btrfs use kmem_cache_zalloc() with __GFP_NOFAIL just like xfs  
> or use mempool with pre-alloc to prevent fail?

I tried both way.

1) add __GFP_NOFAIL to kmem_cache_zalloc()
see 0001-btrfs-add-__GFP_NOFAIL-to-kmem_cache.patch

but this problem still happened in test.


2) switch to  use mempool_t for btrfs_path
see 0001-btrfs-switch-to-mempool_t-for-btrfs_path.patch

this problem yet not happen in test.

But the memory alloc failure is difficult to test, we need more review.


Best Regards
Wang Yugui (wangyugui@e16-tech.com)
2021/03/28



--------_60605F5F00000000D964_MULTIPART_MIXED_
Content-Type: application/octet-stream;
 name="0001-btrfs-add-__GFP_NOFAIL-to-kmem_cache.patch"
Content-Disposition: attachment;
 filename="0001-btrfs-add-__GFP_NOFAIL-to-kmem_cache.patch"
Content-Transfer-Encoding: base64

RnJvbSAyZDAzYzNhNmYxY2YzZGIwNTIxMmY5YzM3NDVlMmVhODFiYWY4Yjg1IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiB3YW5neXVndWkgPHdhbmd5dWd1aUBlMTYtdGVjaC5jb20+CkRh
dGU6IFNhdCwgMjcgTWFyIDIwMjEgMjM6MDA6MjMgKzA4MDAKU3ViamVjdDogW1BBVENIXSBidHJm
czogYWRkIF9fR0ZQX05PRkFJTCB0byBrbWVtX2NhY2hlCgotLS0KIGZzL2J0cmZzL2JhY2tyZWYu
YyAgICAgICAgICB8IDE5ICsrKysrKysrKy0tLS0tLS0tLS0KIGZzL2J0cmZzL2N0cmVlLmMgICAg
ICAgICAgICB8ICAyICstCiBmcy9idHJmcy9kZWxheWVkLWlub2RlLmMgICAgfCAgMiArLQogZnMv
YnRyZnMvZGVsYXllZC1yZWYuYyAgICAgIHwgMTAgKysrKystLS0tLQogZnMvYnRyZnMvZGVsYXll
ZC1yZWYuaCAgICAgIHwgIDIgKy0KIGZzL2J0cmZzL2Rpc2staW8uYyAgICAgICAgICB8ICAyICst
CiBmcy9idHJmcy9leHRlbnRfaW8uYyAgICAgICAgfCAxMiArKysrKystLS0tLS0KIGZzL2J0cmZz
L2V4dGVudF9tYXAuYyAgICAgICB8ICAyICstCiBmcy9idHJmcy9maWxlLmMgICAgICAgICAgICAg
fCAgMiArLQogZnMvYnRyZnMvZnJlZS1zcGFjZS1jYWNoZS5jIHwgMTggKysrKysrKy0tLS0tLS0t
LS0tCiBmcy9idHJmcy9vcmRlcmVkLWRhdGEuYyAgICAgfCAgMiArLQogZnMvYnRyZnMvdHJhbnNh
Y3Rpb24uYyAgICAgIHwgIDIgKy0KIDEyIGZpbGVzIGNoYW5nZWQsIDM1IGluc2VydGlvbnMoKyks
IDQwIGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2JhY2tyZWYuYyBiL2ZzL2J0
cmZzL2JhY2tyZWYuYwppbmRleCBmNDdjMTUyLi45NDNhNjdlIDEwMDY0NAotLS0gYS9mcy9idHJm
cy9iYWNrcmVmLmMKKysrIGIvZnMvYnRyZnMvYmFja3JlZi5jCkBAIC03MzYsOCArNzM2LDcgQEAg
c3RhdGljIGludCByZXNvbHZlX2luZGlyZWN0X3JlZnMoc3RydWN0IGJ0cmZzX2ZzX2luZm8gKmZz
X2luZm8sCiAJCXdoaWxlICgobm9kZSA9IHVsaXN0X25leHQocGFyZW50cywgJnVpdGVyKSkpIHsK
IAkJCXN0cnVjdCBwcmVsaW1fcmVmICpuZXdfcmVmOwogCi0JCQluZXdfcmVmID0ga21lbV9jYWNo
ZV9hbGxvYyhidHJmc19wcmVsaW1fcmVmX2NhY2hlLAotCQkJCQkJICAgR0ZQX05PRlMpOworCQkJ
bmV3X3JlZiA9IGttZW1fY2FjaGVfYWxsb2MoYnRyZnNfcHJlbGltX3JlZl9jYWNoZSwgR0ZQX05P
RlMgfCBfX0dGUF9OT0ZBSUwpOwogCQkJaWYgKCFuZXdfcmVmKSB7CiAJCQkJZnJlZV9wcmVmKHJl
Zik7CiAJCQkJcmV0ID0gLUVOT01FTTsKQEAgLTk5MCw3ICs5ODksNyBAQCBzdGF0aWMgaW50IGFk
ZF9pbmxpbmVfcmVmcyhjb25zdCBzdHJ1Y3QgYnRyZnNfZnNfaW5mbyAqZnNfaW5mbywKIAkJY2Fz
ZSBCVFJGU19TSEFSRURfQkxPQ0tfUkVGX0tFWToKIAkJCXJldCA9IGFkZF9kaXJlY3RfcmVmKGZz
X2luZm8sIHByZWZ0cmVlcywKIAkJCQkJICAgICAqaW5mb19sZXZlbCArIDEsIG9mZnNldCwKLQkJ
CQkJICAgICBieXRlbnIsIDEsIE5VTEwsIEdGUF9OT0ZTKTsKKwkJCQkJICAgICBieXRlbnIsIDEs
IE5VTEwsIEdGUF9OT0ZTIHwgX19HRlBfTk9GQUlMKTsKIAkJCWJyZWFrOwogCQljYXNlIEJUUkZT
X1NIQVJFRF9EQVRBX1JFRl9LRVk6IHsKIAkJCXN0cnVjdCBidHJmc19zaGFyZWRfZGF0YV9yZWYg
KnNkcmVmOwpAQCAtMTAwMCwxMyArOTk5LDEzIEBAIHN0YXRpYyBpbnQgYWRkX2lubGluZV9yZWZz
KGNvbnN0IHN0cnVjdCBidHJmc19mc19pbmZvICpmc19pbmZvLAogCQkJY291bnQgPSBidHJmc19z
aGFyZWRfZGF0YV9yZWZfY291bnQobGVhZiwgc2RyZWYpOwogCiAJCQlyZXQgPSBhZGRfZGlyZWN0
X3JlZihmc19pbmZvLCBwcmVmdHJlZXMsIDAsIG9mZnNldCwKLQkJCQkJICAgICBieXRlbnIsIGNv
dW50LCBzYywgR0ZQX05PRlMpOworCQkJCQkgICAgIGJ5dGVuciwgY291bnQsIHNjLCBHRlBfTk9G
UyB8IF9fR0ZQX05PRkFJTCk7CiAJCQlicmVhazsKIAkJfQogCQljYXNlIEJUUkZTX1RSRUVfQkxP
Q0tfUkVGX0tFWToKIAkJCXJldCA9IGFkZF9pbmRpcmVjdF9yZWYoZnNfaW5mbywgcHJlZnRyZWVz
LCBvZmZzZXQsCiAJCQkJCSAgICAgICBOVUxMLCAqaW5mb19sZXZlbCArIDEsCi0JCQkJCSAgICAg
ICBieXRlbnIsIDEsIE5VTEwsIEdGUF9OT0ZTKTsKKwkJCQkJICAgICAgIGJ5dGVuciwgMSwgTlVM
TCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCQkJYnJlYWs7CiAJCWNhc2UgQlRSRlNfRVhU
RU5UX0RBVEFfUkVGX0tFWTogewogCQkJc3RydWN0IGJ0cmZzX2V4dGVudF9kYXRhX3JlZiAqZHJl
ZjsKQEAgLTEwMjksNyArMTAyOCw3IEBAIHN0YXRpYyBpbnQgYWRkX2lubGluZV9yZWZzKGNvbnN0
IHN0cnVjdCBidHJmc19mc19pbmZvICpmc19pbmZvLAogCiAJCQlyZXQgPSBhZGRfaW5kaXJlY3Rf
cmVmKGZzX2luZm8sIHByZWZ0cmVlcywgcm9vdCwKIAkJCQkJICAgICAgICZrZXksIDAsIGJ5dGVu
ciwgY291bnQsCi0JCQkJCSAgICAgICBzYywgR0ZQX05PRlMpOworCQkJCQkgICAgICAgc2MsIEdG
UF9OT0ZTIHwgX19HRlBfTk9GQUlMKTsKIAkJCWJyZWFrOwogCQl9CiAJCWRlZmF1bHQ6CkBAIC0x
MDg0LDcgKzEwODMsNyBAQCBzdGF0aWMgaW50IGFkZF9rZXllZF9yZWZzKHN0cnVjdCBidHJmc19m
c19pbmZvICpmc19pbmZvLAogCQkJLyogU0hBUkVEIERJUkVDVCBNRVRBREFUQSBiYWNrcmVmICov
CiAJCQlyZXQgPSBhZGRfZGlyZWN0X3JlZihmc19pbmZvLCBwcmVmdHJlZXMsCiAJCQkJCSAgICAg
aW5mb19sZXZlbCArIDEsIGtleS5vZmZzZXQsCi0JCQkJCSAgICAgYnl0ZW5yLCAxLCBOVUxMLCBH
RlBfTk9GUyk7CisJCQkJCSAgICAgYnl0ZW5yLCAxLCBOVUxMLCBHRlBfTk9GUyB8IF9fR0ZQX05P
RkFJTCk7CiAJCQlicmVhazsKIAkJY2FzZSBCVFJGU19TSEFSRURfREFUQV9SRUZfS0VZOiB7CiAJ
CQkvKiBTSEFSRUQgRElSRUNUIEZVTEwgYmFja3JlZiAqLwpAQCAtMTA5NiwxNCArMTA5NSwxNCBA
QCBzdGF0aWMgaW50IGFkZF9rZXllZF9yZWZzKHN0cnVjdCBidHJmc19mc19pbmZvICpmc19pbmZv
LAogCQkJY291bnQgPSBidHJmc19zaGFyZWRfZGF0YV9yZWZfY291bnQobGVhZiwgc2RyZWYpOwog
CQkJcmV0ID0gYWRkX2RpcmVjdF9yZWYoZnNfaW5mbywgcHJlZnRyZWVzLCAwLAogCQkJCQkgICAg
IGtleS5vZmZzZXQsIGJ5dGVuciwgY291bnQsCi0JCQkJCSAgICAgc2MsIEdGUF9OT0ZTKTsKKwkJ
CQkJICAgICBzYywgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCQkJYnJlYWs7CiAJCX0KIAkJ
Y2FzZSBCVFJGU19UUkVFX0JMT0NLX1JFRl9LRVk6CiAJCQkvKiBOT1JNQUwgSU5ESVJFQ1QgTUVU
QURBVEEgYmFja3JlZiAqLwogCQkJcmV0ID0gYWRkX2luZGlyZWN0X3JlZihmc19pbmZvLCBwcmVm
dHJlZXMsIGtleS5vZmZzZXQsCiAJCQkJCSAgICAgICBOVUxMLCBpbmZvX2xldmVsICsgMSwgYnl0
ZW5yLAotCQkJCQkgICAgICAgMSwgTlVMTCwgR0ZQX05PRlMpOworCQkJCQkgICAgICAgMSwgTlVM
TCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCQkJYnJlYWs7CiAJCWNhc2UgQlRSRlNfRVhU
RU5UX0RBVEFfUkVGX0tFWTogewogCQkJLyogTk9STUFMIElORElSRUNUIERBVEEgYmFja3JlZiAq
LwpAQCAtMTEyNyw3ICsxMTI2LDcgQEAgc3RhdGljIGludCBhZGRfa2V5ZWRfcmVmcyhzdHJ1Y3Qg
YnRyZnNfZnNfaW5mbyAqZnNfaW5mbywKIAkJCXJvb3QgPSBidHJmc19leHRlbnRfZGF0YV9yZWZf
cm9vdChsZWFmLCBkcmVmKTsKIAkJCXJldCA9IGFkZF9pbmRpcmVjdF9yZWYoZnNfaW5mbywgcHJl
ZnRyZWVzLCByb290LAogCQkJCQkgICAgICAgJmtleSwgMCwgYnl0ZW5yLCBjb3VudCwKLQkJCQkJ
ICAgICAgIHNjLCBHRlBfTk9GUyk7CisJCQkJCSAgICAgICBzYywgR0ZQX05PRlMgfCBfX0dGUF9O
T0ZBSUwpOwogCQkJYnJlYWs7CiAJCX0KIAkJZGVmYXVsdDoKZGlmZiAtLWdpdCBhL2ZzL2J0cmZz
L2N0cmVlLmMgYi9mcy9idHJmcy9jdHJlZS5jCmluZGV4IDM0YjkyOWIuLjFlNzE1MzggMTAwNjQ0
Ci0tLSBhL2ZzL2J0cmZzL2N0cmVlLmMKKysrIGIvZnMvYnRyZnMvY3RyZWUuYwpAQCAtNzUsNyAr
NzUsNyBAQCBzaXplX3QgX19hdHRyaWJ1dGVfY29uc3RfXyBidHJmc19nZXRfbnVtX2NzdW1zKHZv
aWQpCiAKIHN0cnVjdCBidHJmc19wYXRoICpidHJmc19hbGxvY19wYXRoKHZvaWQpCiB7Ci0JcmV0
dXJuIGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX3BhdGhfY2FjaGVwLCBHRlBfTk9GUyk7CisJcmV0
dXJuIGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX3BhdGhfY2FjaGVwLCBHRlBfTk9GUyB8IF9fR0ZQ
X05PRkFJTCk7CiB9CiAKIC8qIHRoaXMgYWxzbyByZWxlYXNlcyB0aGUgcGF0aCAqLwpkaWZmIC0t
Z2l0IGEvZnMvYnRyZnMvZGVsYXllZC1pbm9kZS5jIGIvZnMvYnRyZnMvZGVsYXllZC1pbm9kZS5j
CmluZGV4IGJmMjU0MDEuLjE0MzEyMDggMTAwNjQ0Ci0tLSBhL2ZzL2J0cmZzL2RlbGF5ZWQtaW5v
ZGUuYworKysgYi9mcy9idHJmcy9kZWxheWVkLWlub2RlLmMKQEAgLTEzMyw3ICsxMzMsNyBAQCBh
Z2FpbjoKIAlpZiAobm9kZSkKIAkJcmV0dXJuIG5vZGU7CiAKLQlub2RlID0ga21lbV9jYWNoZV96
YWxsb2MoZGVsYXllZF9ub2RlX2NhY2hlLCBHRlBfTk9GUyk7CisJbm9kZSA9IGttZW1fY2FjaGVf
emFsbG9jKGRlbGF5ZWRfbm9kZV9jYWNoZSwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCWlm
ICghbm9kZSkKIAkJcmV0dXJuIEVSUl9QVFIoLUVOT01FTSk7CiAJYnRyZnNfaW5pdF9kZWxheWVk
X25vZGUobm9kZSwgcm9vdCwgaW5vKTsKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2RlbGF5ZWQtcmVm
LmMgYi9mcy9idHJmcy9kZWxheWVkLXJlZi5jCmluZGV4IDYzYmU3ZDAuLmRkNDM1NGEgMTAwNjQ0
Ci0tLSBhL2ZzL2J0cmZzL2RlbGF5ZWQtcmVmLmMKKysrIGIvZnMvYnRyZnMvZGVsYXllZC1yZWYu
YwpAQCAtOTUxLDExICs5NTEsMTEgQEAgaW50IGJ0cmZzX2FkZF9kZWxheWVkX3RyZWVfcmVmKHN0
cnVjdCBidHJmc190cmFuc19oYW5kbGUgKnRyYW5zLAogCiAJQVNTRVJUKGdlbmVyaWNfcmVmLT50
eXBlID09IEJUUkZTX1JFRl9NRVRBREFUQSAmJiBnZW5lcmljX3JlZi0+YWN0aW9uKTsKIAlCVUdf
T04oZXh0ZW50X29wICYmIGV4dGVudF9vcC0+aXNfZGF0YSk7Ci0JcmVmID0ga21lbV9jYWNoZV9h
bGxvYyhidHJmc19kZWxheWVkX3RyZWVfcmVmX2NhY2hlcCwgR0ZQX05PRlMpOworCXJlZiA9IGtt
ZW1fY2FjaGVfYWxsb2MoYnRyZnNfZGVsYXllZF90cmVlX3JlZl9jYWNoZXAsIEdGUF9OT0ZTIHwg
X19HRlBfTk9GQUlMKTsKIAlpZiAoIXJlZikKIAkJcmV0dXJuIC1FTk9NRU07CiAKLQloZWFkX3Jl
ZiA9IGttZW1fY2FjaGVfYWxsb2MoYnRyZnNfZGVsYXllZF9yZWZfaGVhZF9jYWNoZXAsIEdGUF9O
T0ZTKTsKKwloZWFkX3JlZiA9IGttZW1fY2FjaGVfYWxsb2MoYnRyZnNfZGVsYXllZF9yZWZfaGVh
ZF9jYWNoZXAsIEdGUF9OT0ZTIHwgX19HRlBfTk9GQUlMKTsKIAlpZiAoIWhlYWRfcmVmKSB7CiAJ
CWttZW1fY2FjaGVfZnJlZShidHJmc19kZWxheWVkX3RyZWVfcmVmX2NhY2hlcCwgcmVmKTsKIAkJ
cmV0dXJuIC1FTk9NRU07CkBAIC0xMDQ0LDcgKzEwNDQsNyBAQCBpbnQgYnRyZnNfYWRkX2RlbGF5
ZWRfZGF0YV9yZWYoc3RydWN0IGJ0cmZzX3RyYW5zX2hhbmRsZSAqdHJhbnMsCiAJdTggcmVmX3R5
cGU7CiAKIAlBU1NFUlQoZ2VuZXJpY19yZWYtPnR5cGUgPT0gQlRSRlNfUkVGX0RBVEEgJiYgYWN0
aW9uKTsKLQlyZWYgPSBrbWVtX2NhY2hlX2FsbG9jKGJ0cmZzX2RlbGF5ZWRfZGF0YV9yZWZfY2Fj
aGVwLCBHRlBfTk9GUyk7CisJcmVmID0ga21lbV9jYWNoZV9hbGxvYyhidHJmc19kZWxheWVkX2Rh
dGFfcmVmX2NhY2hlcCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCWlmICghcmVmKQogCQly
ZXR1cm4gLUVOT01FTTsKIApAQCAtMTA2MCw3ICsxMDYwLDcgQEAgaW50IGJ0cmZzX2FkZF9kZWxh
eWVkX2RhdGFfcmVmKHN0cnVjdCBidHJmc190cmFuc19oYW5kbGUgKnRyYW5zLAogCXJlZi0+b2Zm
c2V0ID0gb2Zmc2V0OwogCiAKLQloZWFkX3JlZiA9IGttZW1fY2FjaGVfYWxsb2MoYnRyZnNfZGVs
YXllZF9yZWZfaGVhZF9jYWNoZXAsIEdGUF9OT0ZTKTsKKwloZWFkX3JlZiA9IGttZW1fY2FjaGVf
YWxsb2MoYnRyZnNfZGVsYXllZF9yZWZfaGVhZF9jYWNoZXAsIEdGUF9OT0ZTIHwgX19HRlBfTk9G
QUlMKTsKIAlpZiAoIWhlYWRfcmVmKSB7CiAJCWttZW1fY2FjaGVfZnJlZShidHJmc19kZWxheWVk
X2RhdGFfcmVmX2NhY2hlcCwgcmVmKTsKIAkJcmV0dXJuIC1FTk9NRU07CkBAIC0xMTIxLDcgKzEx
MjEsNyBAQCBpbnQgYnRyZnNfYWRkX2RlbGF5ZWRfZXh0ZW50X29wKHN0cnVjdCBidHJmc190cmFu
c19oYW5kbGUgKnRyYW5zLAogCXN0cnVjdCBidHJmc19kZWxheWVkX3JlZl9oZWFkICpoZWFkX3Jl
ZjsKIAlzdHJ1Y3QgYnRyZnNfZGVsYXllZF9yZWZfcm9vdCAqZGVsYXllZF9yZWZzOwogCi0JaGVh
ZF9yZWYgPSBrbWVtX2NhY2hlX2FsbG9jKGJ0cmZzX2RlbGF5ZWRfcmVmX2hlYWRfY2FjaGVwLCBH
RlBfTk9GUyk7CisJaGVhZF9yZWYgPSBrbWVtX2NhY2hlX2FsbG9jKGJ0cmZzX2RlbGF5ZWRfcmVm
X2hlYWRfY2FjaGVwLCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCk7CiAJaWYgKCFoZWFkX3JlZikK
IAkJcmV0dXJuIC1FTk9NRU07CiAKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2RlbGF5ZWQtcmVmLmgg
Yi9mcy9idHJmcy9kZWxheWVkLXJlZi5oCmluZGV4IGUyMmZiYTIuLmZlOGZjMjMgMTAwNjQ0Ci0t
LSBhL2ZzL2J0cmZzL2RlbGF5ZWQtcmVmLmgKKysrIGIvZnMvYnRyZnMvZGVsYXllZC1yZWYuaApA
QCAtMjk2LDcgKzI5Niw3IEBAIHN0YXRpYyBpbmxpbmUgdm9pZCBidHJmc19pbml0X2RhdGFfcmVm
KHN0cnVjdCBidHJmc19yZWYgKmdlbmVyaWNfcmVmLAogc3RhdGljIGlubGluZSBzdHJ1Y3QgYnRy
ZnNfZGVsYXllZF9leHRlbnRfb3AgKgogYnRyZnNfYWxsb2NfZGVsYXllZF9leHRlbnRfb3Aodm9p
ZCkKIHsKLQlyZXR1cm4ga21lbV9jYWNoZV9hbGxvYyhidHJmc19kZWxheWVkX2V4dGVudF9vcF9j
YWNoZXAsIEdGUF9OT0ZTKTsKKwlyZXR1cm4ga21lbV9jYWNoZV9hbGxvYyhidHJmc19kZWxheWVk
X2V4dGVudF9vcF9jYWNoZXAsIEdGUF9OT0ZTIHwgX19HRlBfTk9GQUlMKTsKIH0KIAogc3RhdGlj
IGlubGluZSB2b2lkCmRpZmYgLS1naXQgYS9mcy9idHJmcy9kaXNrLWlvLmMgYi9mcy9idHJmcy9k
aXNrLWlvLmMKaW5kZXggNDFiNzE4Yy4uMzVmNWQ4MyAxMDA2NDQKLS0tIGEvZnMvYnRyZnMvZGlz
ay1pby5jCisrKyBiL2ZzL2J0cmZzL2Rpc2staW8uYwpAQCAtNzM2LDcgKzczNiw3IEBAIGJsa19z
dGF0dXNfdCBidHJmc19iaW9fd3FfZW5kX2lvKHN0cnVjdCBidHJmc19mc19pbmZvICppbmZvLCBz
dHJ1Y3QgYmlvICpiaW8sCiB7CiAJc3RydWN0IGJ0cmZzX2VuZF9pb193cSAqZW5kX2lvX3dxOwog
Ci0JZW5kX2lvX3dxID0ga21lbV9jYWNoZV9hbGxvYyhidHJmc19lbmRfaW9fd3FfY2FjaGUsIEdG
UF9OT0ZTKTsKKwllbmRfaW9fd3EgPSBrbWVtX2NhY2hlX2FsbG9jKGJ0cmZzX2VuZF9pb193cV9j
YWNoZSwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCWlmICghZW5kX2lvX3dxKQogCQlyZXR1
cm4gQkxLX1NUU19SRVNPVVJDRTsKIApkaWZmIC0tZ2l0IGEvZnMvYnRyZnMvZXh0ZW50X2lvLmMg
Yi9mcy9idHJmcy9leHRlbnRfaW8uYwppbmRleCA5MTA3NjlkLi44YzI4NjIzIDEwMDY0NAotLS0g
YS9mcy9idHJmcy9leHRlbnRfaW8uYworKysgYi9mcy9idHJmcy9leHRlbnRfaW8uYwpAQCAtMTIy
Nyw3ICsxMjI3LDcgQEAgYWdhaW46CiAJCSAqIGV4dGVudCBzdGF0ZSBhbGxvY2F0aW9ucyBhcmUg
bmVlZGVkLiBXZSdsbCBvbmx5IGtub3cgdGhpcwogCQkgKiBhZnRlciBsb2NraW5nIHRoZSB0cmVl
LgogCQkgKi8KLQkJcHJlYWxsb2MgPSBhbGxvY19leHRlbnRfc3RhdGUoR0ZQX05PRlMpOworCQlw
cmVhbGxvYyA9IGFsbG9jX2V4dGVudF9zdGF0ZShHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCk7CiAJ
CWlmICghcHJlYWxsb2MgJiYgIWZpcnN0X2l0ZXJhdGlvbikKIAkJCXJldHVybiAtRU5PTUVNOwog
CX0KQEAgLTE0MTIsNyArMTQxMiw3IEBAIGludCBzZXRfcmVjb3JkX2V4dGVudF9iaXRzKHN0cnVj
dCBleHRlbnRfaW9fdHJlZSAqdHJlZSwgdTY0IHN0YXJ0LCB1NjQgZW5kLAogCSAqLwogCUJVR19P
TihiaXRzICYgRVhURU5UX0xPQ0tFRCk7CiAKLQlyZXR1cm4gc2V0X2V4dGVudF9iaXQodHJlZSwg
c3RhcnQsIGVuZCwgYml0cywgMCwgTlVMTCwgTlVMTCwgR0ZQX05PRlMsCisJcmV0dXJuIHNldF9l
eHRlbnRfYml0KHRyZWUsIHN0YXJ0LCBlbmQsIGJpdHMsIDAsIE5VTEwsIE5VTEwsIEdGUF9OT0ZT
IHwgX19HRlBfTk9GQUlMLAogCQkJICAgICAgY2hhbmdlc2V0KTsKIH0KIApAQCAtMTQyOCw3ICsx
NDI4LDcgQEAgaW50IGNsZWFyX2V4dGVudF9iaXQoc3RydWN0IGV4dGVudF9pb190cmVlICp0cmVl
LCB1NjQgc3RhcnQsIHU2NCBlbmQsCiAJCSAgICAgc3RydWN0IGV4dGVudF9zdGF0ZSAqKmNhY2hl
ZCkKIHsKIAlyZXR1cm4gX19jbGVhcl9leHRlbnRfYml0KHRyZWUsIHN0YXJ0LCBlbmQsIGJpdHMs
IHdha2UsIGRlbGV0ZSwKLQkJCQkgIGNhY2hlZCwgR0ZQX05PRlMsIE5VTEwpOworCQkJCSAgY2Fj
aGVkLCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCwgTlVMTCk7CiB9CiAKIGludCBjbGVhcl9yZWNv
cmRfZXh0ZW50X2JpdHMoc3RydWN0IGV4dGVudF9pb190cmVlICp0cmVlLCB1NjQgc3RhcnQsIHU2
NCBlbmQsCkBAIC0xNDQwLDcgKzE0NDAsNyBAQCBpbnQgY2xlYXJfcmVjb3JkX2V4dGVudF9iaXRz
KHN0cnVjdCBleHRlbnRfaW9fdHJlZSAqdHJlZSwgdTY0IHN0YXJ0LCB1NjQgZW5kLAogCSAqLwog
CUJVR19PTihiaXRzICYgRVhURU5UX0xPQ0tFRCk7CiAKLQlyZXR1cm4gX19jbGVhcl9leHRlbnRf
Yml0KHRyZWUsIHN0YXJ0LCBlbmQsIGJpdHMsIDAsIDAsIE5VTEwsIEdGUF9OT0ZTLAorCXJldHVy
biBfX2NsZWFyX2V4dGVudF9iaXQodHJlZSwgc3RhcnQsIGVuZCwgYml0cywgMCwgMCwgTlVMTCwg
R0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwsCiAJCQkJICBjaGFuZ2VzZXQpOwogfQogCkBAIC0xNDU3
LDcgKzE0NTcsNyBAQCBpbnQgbG9ja19leHRlbnRfYml0cyhzdHJ1Y3QgZXh0ZW50X2lvX3RyZWUg
KnRyZWUsIHU2NCBzdGFydCwgdTY0IGVuZCwKIAl3aGlsZSAoMSkgewogCQllcnIgPSBzZXRfZXh0
ZW50X2JpdCh0cmVlLCBzdGFydCwgZW5kLCBFWFRFTlRfTE9DS0VELAogCQkJCSAgICAgRVhURU5U
X0xPQ0tFRCwgJmZhaWxlZF9zdGFydCwKLQkJCQkgICAgIGNhY2hlZF9zdGF0ZSwgR0ZQX05PRlMs
IE5VTEwpOworCQkJCSAgICAgY2FjaGVkX3N0YXRlLCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCwg
TlVMTCk7CiAJCWlmIChlcnIgPT0gLUVFWElTVCkgewogCQkJd2FpdF9leHRlbnRfYml0KHRyZWUs
IGZhaWxlZF9zdGFydCwgZW5kLCBFWFRFTlRfTE9DS0VEKTsKIAkJCXN0YXJ0ID0gZmFpbGVkX3N0
YXJ0OwpAQCAtMTQ3NCw3ICsxNDc0LDcgQEAgaW50IHRyeV9sb2NrX2V4dGVudChzdHJ1Y3QgZXh0
ZW50X2lvX3RyZWUgKnRyZWUsIHU2NCBzdGFydCwgdTY0IGVuZCkKIAl1NjQgZmFpbGVkX3N0YXJ0
OwogCiAJZXJyID0gc2V0X2V4dGVudF9iaXQodHJlZSwgc3RhcnQsIGVuZCwgRVhURU5UX0xPQ0tF
RCwgRVhURU5UX0xPQ0tFRCwKLQkJCSAgICAgJmZhaWxlZF9zdGFydCwgTlVMTCwgR0ZQX05PRlMs
IE5VTEwpOworCQkJICAgICAmZmFpbGVkX3N0YXJ0LCBOVUxMLCBHRlBfTk9GUyB8IF9fR0ZQX05P
RkFJTCwgTlVMTCk7CiAJaWYgKGVyciA9PSAtRUVYSVNUKSB7CiAJCWlmIChmYWlsZWRfc3RhcnQg
PiBzdGFydCkKIAkJCWNsZWFyX2V4dGVudF9iaXQodHJlZSwgc3RhcnQsIGZhaWxlZF9zdGFydCAt
IDEsCmRpZmYgLS1naXQgYS9mcy9idHJmcy9leHRlbnRfbWFwLmMgYi9mcy9idHJmcy9leHRlbnRf
bWFwLmMKaW5kZXggNGE4ZTAyZi4uMjE3OTMzMCAxMDA2NDQKLS0tIGEvZnMvYnRyZnMvZXh0ZW50
X21hcC5jCisrKyBiL2ZzL2J0cmZzL2V4dGVudF9tYXAuYwpAQCAtNTAsNyArNTAsNyBAQCB2b2lk
IGV4dGVudF9tYXBfdHJlZV9pbml0KHN0cnVjdCBleHRlbnRfbWFwX3RyZWUgKnRyZWUpCiBzdHJ1
Y3QgZXh0ZW50X21hcCAqYWxsb2NfZXh0ZW50X21hcCh2b2lkKQogewogCXN0cnVjdCBleHRlbnRf
bWFwICplbTsKLQllbSA9IGttZW1fY2FjaGVfemFsbG9jKGV4dGVudF9tYXBfY2FjaGUsIEdGUF9O
T0ZTKTsKKwllbSA9IGttZW1fY2FjaGVfemFsbG9jKGV4dGVudF9tYXBfY2FjaGUsIEdGUF9OT0ZT
IHwgX19HRlBfTk9GQUlMKTsKIAlpZiAoIWVtKQogCQlyZXR1cm4gTlVMTDsKIAlSQl9DTEVBUl9O
T0RFKCZlbS0+cmJfbm9kZSk7CmRpZmYgLS1naXQgYS9mcy9idHJmcy9maWxlLmMgYi9mcy9idHJm
cy9maWxlLmMKaW5kZXggMGUxNTVmMC4uMTZhMTU4MiAxMDA2NDQKLS0tIGEvZnMvYnRyZnMvZmls
ZS5jCisrKyBiL2ZzL2J0cmZzL2ZpbGUuYwpAQCAtMTUxLDcgKzE1MSw3IEBAIGludCBidHJmc19h
ZGRfaW5vZGVfZGVmcmFnKHN0cnVjdCBidHJmc190cmFuc19oYW5kbGUgKnRyYW5zLAogCWVsc2UK
IAkJdHJhbnNpZCA9IGlub2RlLT5yb290LT5sYXN0X3RyYW5zOwogCi0JZGVmcmFnID0ga21lbV9j
YWNoZV96YWxsb2MoYnRyZnNfaW5vZGVfZGVmcmFnX2NhY2hlcCwgR0ZQX05PRlMpOworCWRlZnJh
ZyA9IGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX2lub2RlX2RlZnJhZ19jYWNoZXAsIEdGUF9OT0ZT
IHwgX19HRlBfTk9GQUlMKTsKIAlpZiAoIWRlZnJhZykKIAkJcmV0dXJuIC1FTk9NRU07CiAKZGlm
ZiAtLWdpdCBhL2ZzL2J0cmZzL2ZyZWUtc3BhY2UtY2FjaGUuYyBiL2ZzL2J0cmZzL2ZyZWUtc3Bh
Y2UtY2FjaGUuYwppbmRleCA5OTg4ZGVjLi5mYWEzYTQyIDEwMDY0NAotLS0gYS9mcy9idHJmcy9m
cmVlLXNwYWNlLWNhY2hlLmMKKysrIGIvZnMvYnRyZnMvZnJlZS1zcGFjZS1jYWNoZS5jCkBAIC03
ODIsOCArNzgyLDcgQEAgc3RhdGljIGludCBfX2xvYWRfZnJlZV9zcGFjZV9jYWNoZShzdHJ1Y3Qg
YnRyZnNfcm9vdCAqcm9vdCwgc3RydWN0IGlub2RlICppbm9kZSwKIAkJZ290byBmcmVlX2NhY2hl
OwogCiAJd2hpbGUgKG51bV9lbnRyaWVzKSB7Ci0JCWUgPSBrbWVtX2NhY2hlX3phbGxvYyhidHJm
c19mcmVlX3NwYWNlX2NhY2hlcCwKLQkJCQkgICAgICBHRlBfTk9GUyk7CisJCWUgPSBrbWVtX2Nh
Y2hlX3phbGxvYyhidHJmc19mcmVlX3NwYWNlX2NhY2hlcCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZB
SUwpOwogCQlpZiAoIWUpIHsKIAkJCXJldCA9IC1FTk9NRU07CiAJCQlnb3RvIGZyZWVfY2FjaGU7
CkBAIC04MTQsOCArODEzLDcgQEAgc3RhdGljIGludCBfX2xvYWRfZnJlZV9zcGFjZV9jYWNoZShz
dHJ1Y3QgYnRyZnNfcm9vdCAqcm9vdCwgc3RydWN0IGlub2RlICppbm9kZSwKIAkJfSBlbHNlIHsK
IAkJCUFTU0VSVChudW1fYml0bWFwcyk7CiAJCQludW1fYml0bWFwcy0tOwotCQkJZS0+Yml0bWFw
ID0ga21lbV9jYWNoZV96YWxsb2MoCi0JCQkJCWJ0cmZzX2ZyZWVfc3BhY2VfYml0bWFwX2NhY2hl
cCwgR0ZQX05PRlMpOworCQkJZS0+Yml0bWFwID0ga21lbV9jYWNoZV96YWxsb2MoIGJ0cmZzX2Zy
ZWVfc3BhY2VfYml0bWFwX2NhY2hlcCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCQkJaWYg
KCFlLT5iaXRtYXApIHsKIAkJCQlyZXQgPSAtRU5PTUVNOwogCQkJCWttZW1fY2FjaGVfZnJlZSgK
QEAgLTIyMzgsOCArMjIzNiw3IEBAIG5ld19iaXRtYXA6CiAKIAkJLyogbm8gcHJlLWFsbG9jYXRl
ZCBpbmZvLCBhbGxvY2F0ZSBhIG5ldyBvbmUgKi8KIAkJaWYgKCFpbmZvKSB7Ci0JCQlpbmZvID0g
a21lbV9jYWNoZV96YWxsb2MoYnRyZnNfZnJlZV9zcGFjZV9jYWNoZXAsCi0JCQkJCQkgR0ZQX05P
RlMpOworCQkJaW5mbyA9IGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX2ZyZWVfc3BhY2VfY2FjaGVw
LCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCk7CiAJCQlpZiAoIWluZm8pIHsKIAkJCQlzcGluX2xv
Y2soJmN0bC0+dHJlZV9sb2NrKTsKIAkJCQlyZXQgPSAtRU5PTUVNOwpAQCAtMjI0OCw4ICsyMjQ1
LDcgQEAgbmV3X2JpdG1hcDoKIAkJfQogCiAJCS8qIGFsbG9jYXRlIHRoZSBiaXRtYXAgKi8KLQkJ
aW5mby0+Yml0bWFwID0ga21lbV9jYWNoZV96YWxsb2MoYnRyZnNfZnJlZV9zcGFjZV9iaXRtYXBf
Y2FjaGVwLAotCQkJCQkJIEdGUF9OT0ZTKTsKKwkJaW5mby0+Yml0bWFwID0ga21lbV9jYWNoZV96
YWxsb2MoYnRyZnNfZnJlZV9zcGFjZV9iaXRtYXBfY2FjaGVwLCBHRlBfTk9GUyB8IF9fR0ZQX05P
RkFJTCk7CiAJCWluZm8tPnRyaW1fc3RhdGUgPSBCVFJGU19UUklNX1NUQVRFX1RSSU1NRUQ7CiAJ
CXNwaW5fbG9jaygmY3RsLT50cmVlX2xvY2spOwogCQlpZiAoIWluZm8tPmJpdG1hcCkgewpAQCAt
MjQ3OSw3ICsyNDc1LDcgQEAgaW50IF9fYnRyZnNfYWRkX2ZyZWVfc3BhY2Uoc3RydWN0IGJ0cmZz
X2ZzX2luZm8gKmZzX2luZm8sCiAKIAlBU1NFUlQoIWJ0cmZzX2lzX3pvbmVkKGZzX2luZm8pKTsK
IAotCWluZm8gPSBrbWVtX2NhY2hlX3phbGxvYyhidHJmc19mcmVlX3NwYWNlX2NhY2hlcCwgR0ZQ
X05PRlMpOworCWluZm8gPSBrbWVtX2NhY2hlX3phbGxvYyhidHJmc19mcmVlX3NwYWNlX2NhY2hl
cCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCWlmICghaW5mbykKIAkJcmV0dXJuIC1FTk9N
RU07CiAKQEAgLTQwMTEsNyArNDAwNyw3IEBAIGludCB0ZXN0X2FkZF9mcmVlX3NwYWNlX2VudHJ5
KHN0cnVjdCBidHJmc19ibG9ja19ncm91cCAqY2FjaGUsCiAKIGFnYWluOgogCWlmICghaW5mbykg
ewotCQlpbmZvID0ga21lbV9jYWNoZV96YWxsb2MoYnRyZnNfZnJlZV9zcGFjZV9jYWNoZXAsIEdG
UF9OT0ZTKTsKKwkJaW5mbyA9IGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX2ZyZWVfc3BhY2VfY2Fj
aGVwLCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCk7CiAJCWlmICghaW5mbykKIAkJCXJldHVybiAt
RU5PTUVNOwogCX0KQEAgLTQwMjksNyArNDAyNSw3IEBAIGFnYWluOgogCX0KIAogCWlmICghbWFw
KSB7Ci0JCW1hcCA9IGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX2ZyZWVfc3BhY2VfYml0bWFwX2Nh
Y2hlcCwgR0ZQX05PRlMpOworCQltYXAgPSBrbWVtX2NhY2hlX3phbGxvYyhidHJmc19mcmVlX3Nw
YWNlX2JpdG1hcF9jYWNoZXAsIEdGUF9OT0ZTIHwgX19HRlBfTk9GQUlMKTsKIAkJaWYgKCFtYXAp
IHsKIAkJCWttZW1fY2FjaGVfZnJlZShidHJmc19mcmVlX3NwYWNlX2NhY2hlcCwgaW5mbyk7CiAJ
CQlyZXR1cm4gLUVOT01FTTsKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL29yZGVyZWQtZGF0YS5jIGIv
ZnMvYnRyZnMvb3JkZXJlZC1kYXRhLmMKaW5kZXggOTg1YTIxNS4uZGJlYjgxMCAxMDA2NDQKLS0t
IGEvZnMvYnRyZnMvb3JkZXJlZC1kYXRhLmMKKysrIGIvZnMvYnRyZnMvb3JkZXJlZC1kYXRhLmMK
QEAgLTE4Niw3ICsxODYsNyBAQCBzdGF0aWMgaW50IF9fYnRyZnNfYWRkX29yZGVyZWRfZXh0ZW50
KHN0cnVjdCBidHJmc19pbm9kZSAqaW5vZGUsIHU2NCBmaWxlX29mZnNldAogCQlpZiAocmV0IDwg
MCkKIAkJCXJldHVybiByZXQ7CiAJfQotCWVudHJ5ID0ga21lbV9jYWNoZV96YWxsb2MoYnRyZnNf
b3JkZXJlZF9leHRlbnRfY2FjaGUsIEdGUF9OT0ZTKTsKKwllbnRyeSA9IGttZW1fY2FjaGVfemFs
bG9jKGJ0cmZzX29yZGVyZWRfZXh0ZW50X2NhY2hlLCBHRlBfTk9GUyB8IF9fR0ZQX05PRkFJTCk7
CiAJaWYgKCFlbnRyeSkKIAkJcmV0dXJuIC1FTk9NRU07CiAKZGlmZiAtLWdpdCBhL2ZzL2J0cmZz
L3RyYW5zYWN0aW9uLmMgYi9mcy9idHJmcy90cmFuc2FjdGlvbi5jCmluZGV4IGFjZmY2YmIuLjlj
OTE2ZDkgMTAwNjQ0Ci0tLSBhL2ZzL2J0cmZzL3RyYW5zYWN0aW9uLmMKKysrIGIvZnMvYnRyZnMv
dHJhbnNhY3Rpb24uYwpAQCAtNjUzLDcgKzY1Myw3IEBAIHN0YXJ0X3RyYW5zYWN0aW9uKHN0cnVj
dCBidHJmc19yb290ICpyb290LCB1bnNpZ25lZCBpbnQgbnVtX2l0ZW1zLAogCQkJZ290byByZXNl
cnZlX2ZhaWw7CiAJfQogYWdhaW46Ci0JaCA9IGttZW1fY2FjaGVfemFsbG9jKGJ0cmZzX3RyYW5z
X2hhbmRsZV9jYWNoZXAsIEdGUF9OT0ZTKTsKKwloID0ga21lbV9jYWNoZV96YWxsb2MoYnRyZnNf
dHJhbnNfaGFuZGxlX2NhY2hlcCwgR0ZQX05PRlMgfCBfX0dGUF9OT0ZBSUwpOwogCWlmICghaCkg
ewogCQlyZXQgPSAtRU5PTUVNOwogCQlnb3RvIGFsbG9jX2ZhaWw7Ci0tIAoyLjMwLjIKCg==
--------_60605F5F00000000D964_MULTIPART_MIXED_
Content-Type: application/octet-stream;
 name="0001-btrfs-switch-to-mempool_t-for-btrfs_path.patch"
Content-Disposition: attachment;
 filename="0001-btrfs-switch-to-mempool_t-for-btrfs_path.patch"
Content-Transfer-Encoding: base64

RnJvbSA4MzhmYmVmN2ZkZDBmMjUxMTBjNjc1MDUyYTJmMTc5MjZhNWVjZDcxIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiB3YW5neXVndWkgPHdhbmd5dWd1aUBlMTYtdGVjaC5jb20+CkRh
dGU6IFN1biwgMjggTWFyIDIwMjEgMTg6MTQ6NDEgKzA4MDAKU3ViamVjdDogW1BBVENIXSBidHJm
czogc3dpdGNoIHRvIG1lbXBvb2xfdCBmb3IgYnRyZnNfcGF0aAoKLS0tCiBmcy9idHJmcy9jdHJl
ZS5jIHwgNyArKysrKy0tCiBmcy9idHJmcy9jdHJlZS5oIHwgMiArLQogZnMvYnRyZnMvaW5vZGUu
YyB8IDcgKysrKysrLQogMyBmaWxlcyBjaGFuZ2VkLCAxMiBpbnNlcnRpb25zKCspLCA0IGRlbGV0
aW9ucygtKQoKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2N0cmVlLmMgYi9mcy9idHJmcy9jdHJlZS5j
CmluZGV4IDM0YjkyOWIuLjc1YTM4MmYgMTAwNjQ0Ci0tLSBhL2ZzL2J0cmZzL2N0cmVlLmMKKysr
IGIvZnMvYnRyZnMvY3RyZWUuYwpAQCAtNzUsNyArNzUsMTAgQEAgc2l6ZV90IF9fYXR0cmlidXRl
X2NvbnN0X18gYnRyZnNfZ2V0X251bV9jc3Vtcyh2b2lkKQogCiBzdHJ1Y3QgYnRyZnNfcGF0aCAq
YnRyZnNfYWxsb2NfcGF0aCh2b2lkKQogewotCXJldHVybiBrbWVtX2NhY2hlX3phbGxvYyhidHJm
c19wYXRoX2NhY2hlcCwgR0ZQX05PRlMpOworCXN0cnVjdCBidHJmc19wYXRoICpwID0gbWVtcG9v
bF9hbGxvYyhidHJmc19wYXRoX3Bvb2wsIEdGUF9OT0ZTKTsKKwlpZihwKQorCQltZW1zZXQocCwg
MCwgc2l6ZW9mKCpwKSk7CisJcmV0dXJuIHA7CiB9CiAKIC8qIHRoaXMgYWxzbyByZWxlYXNlcyB0
aGUgcGF0aCAqLwpAQCAtODQsNyArODcsNyBAQCB2b2lkIGJ0cmZzX2ZyZWVfcGF0aChzdHJ1Y3Qg
YnRyZnNfcGF0aCAqcCkKIAlpZiAoIXApCiAJCXJldHVybjsKIAlidHJmc19yZWxlYXNlX3BhdGgo
cCk7Ci0Ja21lbV9jYWNoZV9mcmVlKGJ0cmZzX3BhdGhfY2FjaGVwLCBwKTsKKwltZW1wb29sX2Zy
ZWUocCwgYnRyZnNfcGF0aF9wb29sKTsKIH0KIAogLyoKZGlmZiAtLWdpdCBhL2ZzL2J0cmZzL2N0
cmVlLmggYi9mcy9idHJmcy9jdHJlZS5oCmluZGV4IGUzZjU5YWUuLmU5NTJlMjYgMTAwNjQ0Ci0t
LSBhL2ZzL2J0cmZzL2N0cmVlLmgKKysrIGIvZnMvYnRyZnMvY3RyZWUuaApAQCAtNDMsNyArNDMs
NyBAQCBzdHJ1Y3QgYnRyZnNfc3BhY2VfaW5mbzsKIHN0cnVjdCBidHJmc19ibG9ja19ncm91cDsK
IGV4dGVybiBzdHJ1Y3Qga21lbV9jYWNoZSAqYnRyZnNfdHJhbnNfaGFuZGxlX2NhY2hlcDsKIGV4
dGVybiBzdHJ1Y3Qga21lbV9jYWNoZSAqYnRyZnNfYml0X3JhZGl4X2NhY2hlcDsKLWV4dGVybiBz
dHJ1Y3Qga21lbV9jYWNoZSAqYnRyZnNfcGF0aF9jYWNoZXA7CitleHRlcm4gbWVtcG9vbF90ICpi
dHJmc19wYXRoX3Bvb2w7CiBleHRlcm4gc3RydWN0IGttZW1fY2FjaGUgKmJ0cmZzX2ZyZWVfc3Bh
Y2VfY2FjaGVwOwogZXh0ZXJuIHN0cnVjdCBrbWVtX2NhY2hlICpidHJmc19mcmVlX3NwYWNlX2Jp
dG1hcF9jYWNoZXA7CiBzdHJ1Y3QgYnRyZnNfb3JkZXJlZF9zdW07CmRpZmYgLS1naXQgYS9mcy9i
dHJmcy9pbm9kZS5jIGIvZnMvYnRyZnMvaW5vZGUuYwppbmRleCAyNjg5OTU0Li43YzQ4ODc3IDEw
MDY0NAotLS0gYS9mcy9idHJmcy9pbm9kZS5jCisrKyBiL2ZzL2J0cmZzL2lub2RlLmMKQEAgLTcz
LDcgKzczLDggQEAgc3RhdGljIGNvbnN0IHN0cnVjdCBmaWxlX29wZXJhdGlvbnMgYnRyZnNfZGly
X2ZpbGVfb3BlcmF0aW9uczsKIAogc3RhdGljIHN0cnVjdCBrbWVtX2NhY2hlICpidHJmc19pbm9k
ZV9jYWNoZXA7CiBzdHJ1Y3Qga21lbV9jYWNoZSAqYnRyZnNfdHJhbnNfaGFuZGxlX2NhY2hlcDsK
LXN0cnVjdCBrbWVtX2NhY2hlICpidHJmc19wYXRoX2NhY2hlcDsKK3N0YXRpYyBzdHJ1Y3Qga21l
bV9jYWNoZSAqYnRyZnNfcGF0aF9jYWNoZXA7CittZW1wb29sX3QgKmJ0cmZzX3BhdGhfcG9vbDsK
IHN0cnVjdCBrbWVtX2NhY2hlICpidHJmc19mcmVlX3NwYWNlX2NhY2hlcDsKIHN0cnVjdCBrbWVt
X2NhY2hlICpidHJmc19mcmVlX3NwYWNlX2JpdG1hcF9jYWNoZXA7CiAKQEAgLTg5NzksNiArODk4
MCw3IEBAIHZvaWQgX19jb2xkIGJ0cmZzX2Rlc3Ryb3lfY2FjaGVwKHZvaWQpCiAJcmN1X2JhcnJp
ZXIoKTsKIAlrbWVtX2NhY2hlX2Rlc3Ryb3koYnRyZnNfaW5vZGVfY2FjaGVwKTsKIAlrbWVtX2Nh
Y2hlX2Rlc3Ryb3koYnRyZnNfdHJhbnNfaGFuZGxlX2NhY2hlcCk7CisJbWVtcG9vbF9kZXN0cm95
KGJ0cmZzX3BhdGhfcG9vbCk7CiAJa21lbV9jYWNoZV9kZXN0cm95KGJ0cmZzX3BhdGhfY2FjaGVw
KTsKIAlrbWVtX2NhY2hlX2Rlc3Ryb3koYnRyZnNfZnJlZV9zcGFjZV9jYWNoZXApOwogCWttZW1f
Y2FjaGVfZGVzdHJveShidHJmc19mcmVlX3NwYWNlX2JpdG1hcF9jYWNoZXApOwpAQCAtOTAwNCw2
ICs5MDA2LDkgQEAgaW50IF9faW5pdCBidHJmc19pbml0X2NhY2hlcCh2b2lkKQogCQkJU0xBQl9N
RU1fU1BSRUFELCBOVUxMKTsKIAlpZiAoIWJ0cmZzX3BhdGhfY2FjaGVwKQogCQlnb3RvIGZhaWw7
CisJYnRyZnNfcGF0aF9wb29sID0gbWVtcG9vbF9jcmVhdGVfc2xhYl9wb29sKDIwNDgsIGJ0cmZz
X3BhdGhfY2FjaGVwKTsKKwlpZiAoIWJ0cmZzX3BhdGhfcG9vbCkKKwkJZ290byBmYWlsOwogCiAJ
YnRyZnNfZnJlZV9zcGFjZV9jYWNoZXAgPSBrbWVtX2NhY2hlX2NyZWF0ZSgiYnRyZnNfZnJlZV9z
cGFjZSIsCiAJCQlzaXplb2Yoc3RydWN0IGJ0cmZzX2ZyZWVfc3BhY2UpLCAwLAotLSAKMi4zMC4y
Cgo=
--------_60605F5F00000000D964_MULTIPART_MIXED_--

