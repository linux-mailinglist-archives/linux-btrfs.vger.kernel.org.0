Return-Path: <linux-btrfs-owner@vger.kernel.org>
X-Original-To: lists+linux-btrfs@lfdr.de
Delivered-To: lists+linux-btrfs@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 58798659A1B
	for <lists+linux-btrfs@lfdr.de>; Fri, 30 Dec 2022 16:43:19 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S235264AbiL3PnR (ORCPT <rfc822;lists+linux-btrfs@lfdr.de>);
        Fri, 30 Dec 2022 10:43:17 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:56254 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S234955AbiL3PnO (ORCPT
        <rfc822;linux-btrfs@vger.kernel.org>);
        Fri, 30 Dec 2022 10:43:14 -0500
X-Greylist: delayed 902 seconds by postgrey-1.37 at lindbergh.monkeyblade.net; Fri, 30 Dec 2022 07:43:12 PST
Received: from mail.tethers.com (mail.tethers.com [50.205.100.55])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 4E2BD1B9C2
        for <linux-btrfs@vger.kernel.org>; Fri, 30 Dec 2022 07:43:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; d=tethers.com; s=s2; c=simple/simple;
        t=1672414089; h=from:subject:to:date:message-id;
        bh=vns686vaCMT81lglRbjYFbeyw95hziFgV9f33TC4ezQ=;
        b=mpgIfMbfDg5myzhKT4L8GPGmo0FhFFbc6fR6ua100b5jy2baHsPic3+wtXCUtbA/YM1bsdQaDea
        je2bp/EzpCIrwJN1hZ1cBDZ2fUhNl91p9fJlyrtkQNHS9AAOai4E6tQXl40ZrnrxVu5iPqEAI5Q9E
        rp79UJ/thi40TYU+WrinhA9LHYUFdaZL9r06s5Y654oBOSGXZxeJxcwjXPlg6qRDJ+xNRTT1wfDwK
        OLGUUlvmzqSM8AEQ8btO/hIZ8pon4OOmg0RydQYr2X/ro6Q9soQ8vw7u+JtL9FgQfZXlmanE+M33V
        UGIxnaKT856Tyz5IPbBeLlCJ3Rke4SpJc6zg==
Received: from Exchange2019.secure.tethers.com (172.23.48.153) by
 exchange2019.secure.tethers.com (172.23.48.153) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 15.2.1118.20; Fri, 30 Dec 2022 07:28:09 -0800
Received: from Exchange2019.secure.tethers.com ([fe80::ffb3:a1ad:8f70:8ff3])
 by EXCHANGE2019.secure.tethers.com ([fe80::ffb3:a1ad:8f70:8ff3%14]) with mapi
 id 15.02.1118.020; Fri, 30 Dec 2022 07:28:09 -0800
From:   Sam Winchenbach <swichenbach@tethers.com>
To:     Qu Wenruo <quwenruo.btrfs@gmx.com>,
        Heinrich Schuchardt <xypron.glpk@gmx.de>,
        =?utf-8?B?TWFyZWsgQmVow7pu?= <kabel@kernel.org>
CC:     "u-boot@lists.denx.de" <u-boot@lists.denx.de>,
        Qu Wenruo <wqu@suse.com>,
        "linux-btrfs@vger.kernel.org" <linux-btrfs@vger.kernel.org>
Subject: RE: Possible bug in BTRFS w/ Duplication
Thread-Topic: Possible bug in BTRFS w/ Duplication
Thread-Index: Adka+vuz/Z7NK3MJQMCy/azwMbd3OAA17N0AABSI1QAAD5epIA==
Date:   Fri, 30 Dec 2022 15:28:09 +0000
Message-ID: <642db528742c47d79ee0314db67a1bed@tethers.com>
References: <62218a2a5a274ada96f97f7ac4e151ef@tethers.com>
 <bc82fc52-18b8-1205-5509-6fcd24529bea@gmx.de>
 <58f08b77-f8cc-c2f8-a1ec-135ce48fbd8e@gmx.com>
In-Reply-To: <58f08b77-f8cc-c2f8-a1ec-135ce48fbd8e@gmx.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [72.224.69.22]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,SPF_HELO_NONE,SPF_PASS
        autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-btrfs.vger.kernel.org>
X-Mailing-List: linux-btrfs@vger.kernel.org

SSBiZWxpZXZlIHlvdSBmaXhlZCB0aGUgaXNzdWUgd2l0aCB0aGUgcGF0Y2ggeW91IHByZXNlbnRl
ZC4gSSB3YXMgaW4gdGhlIHByb2Nlc3Mgb2YgdGVzdGluZyBhIHNpbWlsYXIgZml4IGZvciByZWxl
YXNlIGFuZCBpdCBzb2x2ZWQgdGhlIGlzc3VlIEkgZW5jb3VudGVyZWQuDQoNClRoYW5rcywNClNh
bSBXaW5jaGVuYmFjaA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogVS1Cb290
IDx1LWJvb3QtYm91bmNlc0BsaXN0cy5kZW54LmRlPiBPbiBCZWhhbGYgT2YgUXUgV2VucnVvDQpT
ZW50OiBUaHVyc2RheSwgRGVjZW1iZXIgMjksIDIwMjIgNzowMSBQTQ0KVG86IEhlaW5yaWNoIFNj
aHVjaGFyZHQgPHh5cHJvbi5nbHBrQGdteC5kZT47IFNhbSBXaW5jaGVuYmFjaCA8c3dpY2hlbmJh
Y2hAdGV0aGVycy5jb20+OyBNYXJlayBCZWjDum4gPGthYmVsQGtlcm5lbC5vcmc+DQpDYzogdS1i
b290QGxpc3RzLmRlbnguZGU7IFF1IFdlbnJ1byA8d3F1QHN1c2UuY29tPjsgbGludXgtYnRyZnNA
dmdlci5rZXJuZWwub3JnDQpTdWJqZWN0OiBSZTogUG9zc2libGUgYnVnIGluIEJUUkZTIHcvIER1
cGxpY2F0aW9uDQoNCg0KDQpPbiAyMDIyLzEyLzI5IDIyOjEyLCBIZWlucmljaCBTY2h1Y2hhcmR0
IHdyb3RlOg0KPiBPbiAxMi8yOC8yMiAyMTo1MSwgU2FtIFdpbmNoZW5iYWNoIHdyb3RlOg0KPj4g
SGVsbG8sDQo+Pg0KPj4gSGVsbG8sIEkgaGF2ZSBoaXQgdGhlIGZvbGxvd2luZyBzaXR1YXRpb24g
d2hlbiB0cnlpbmcgdG8gbG9hZCBmaWxlcyANCj4+IGZyb20gYSBCVFJGUyBwYXJ0aXRpb24gd2l0
aCBkdXBsaWNhdGlvbiBlbmFibGVkLg0KDQpZb3UgbWVhbiBtdWx0aS1kZXZpY2U/DQoNCkZvciBE
VVAvUkFJRDEgZHVwbGljYXRpb24sIHRoZXkgZG9uJ3QgaGF2ZSBzdHJpcGUgbGltaXRhdGlvbiBh
dCBhbGwuDQoNClRodXMgSSBiZWxpZXZlIHlvdSdyZSB0YWxraW5nIGFib3V0IFJBSUQwICh3aGlj
aCBkb2Vzbid0IGhhdmUgYW55IGR1cGxpY2F0aW9uL2V4dHJhIG1pcnJvcnMpIG9yIFJBSUQxMCBv
ciBSQUlENS82Pw0KDQpCdXQgZm9yIG5vdywgd2UgZG9uJ3Qgc3VwcG9ydCBtdWx0aS1kZXZpY2Ug
aW4gVS1ib290IHlldCwgdGh1cyBJJ20gbm90IHN1cmUgd2hhdCBzaXR1YXRpb24geW91J3JlIHRh
bGtpbmcgYWJvdXQuDQoNCk1pbmQgdG8gcnVuIHRoZSBmb2xsb3dpbmcgY29tbWFuZD8NCg0KICAj
IGJ0cmZzIGZpIHVzYWdlIDxtbnQgb2YgdGhlIGJ0cmZzPg0KDQo+Pg0KPj4gSW4gdGhlIGZpcnN0
IGV4YW1wbGUgSSByZWFkIGEgMTZLaUIgZmlsZSAtIF9fYnRyZnNfbWFwX2Jsb2NrKCkgDQo+PiBj
aGFuZ2VzIHRoZSBsZW5ndGggdG8gc29tZXRoaW5nIGxhcmdlciB0aGFuIHRoZSBmaWxlIGJlaW5n
IHJlYWQuIFRoaXMgDQo+PiB3b3JrcyBmaW5lLCBhcyBsZW5ndGggaXMgbGF0ZXIgY2xhbXBlZCB0
byB0aGUgZmlsZSBzaXplLg0KPj4NCj4+IEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgX19idHJmc19t
YXBfYmxvY2soKSBjaGFuZ2VzIHRoZSBsZW5ndGggDQo+PiBwYXJhbWV0ZXIgdG8gc29tZXRoaW5n
IHNtYWxsZXIgdGhhbiB0aGUgZmlsZSAodGhlIHNpemUgb2YgYSBzdHJpcGUpLg0KPj4gVGhpcyBz
ZWVtcyB0byBicmVhayB0aGlzIGNoZWNrIGhlcmU6DQo+Pg0KPj4gwqDCoMKgwqAgcmVhZCA9IGxl
bjsNCj4+IMKgwqDCoMKgIG51bV9jb3BpZXMgPSBidHJmc19udW1fY29waWVzKGZzX2luZm8sIGxv
Z2ljYWwsIGxlbik7DQo+PiDCoMKgwqDCoCBmb3IgKGkgPSAxOyBpIDw9IG51bV9jb3BpZXM7IGkr
Kykgew0KPj4gwqDCoMKgwqDCoMKgwqDCoCByZXQgPSByZWFkX2V4dGVudF9kYXRhKGZzX2luZm8s
IGRlc3QsIGxvZ2ljYWwsICZyZWFkLCBpKTsNCj4+IMKgwqDCoMKgwqDCoMKgwqAgaWYgKHJldCA8
IDAgfHwgcmVhZCAhPSBsZW4pIHsNCj4+IMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBjb250aW51
ZTsNCj4+IMKgwqDCoMKgwqDCoMKgwqAgfQ0KPj4gwqDCoMKgwqDCoMKgwqDCoCBmaW5pc2hlZCA9
IHRydWU7DQo+PiDCoMKgwqDCoMKgwqDCoMKgIGJyZWFrOw0KPj4gwqDCoMKgwqAgfQ0KPj4NCj4+
IFRoZSBwcm9ibGVtIGJlaW5nIHRoYXQgcmVhZCBpcyBhbHdheXMgbGVzcyB0aGFuIGxlbi4NCj4+
DQo+PiBJIGFtIG5vdCBzdXJlIGlmIF9fYnRyZnNfbWFwX2Jsb2NrIGlzIGNoYW5naW5nICJsZW4i
IHRvIHRoZSBpbmNvcnJlY3QgDQo+PiB2YWx1ZSwgb3IgaWYgdGhlcmUgaXMgc29tZSBsb2dpYyBp
biAicmVhZF9leHRlbnRfZGF0YSIgdGhhdCBpc24ndCANCj4+IGNvcnJlY3QuIEFueSBwb2ludGVy
cyBvbiBob3cgdGhpcyBjb2RlIGlzIHN1cHBvc2VkIHRvIHdvcmsgd291bGQgYmUgDQo+PiBncmVh
dGx5IGFwcHJlY2lhdGVkLg0KPj4gVGhhbmtzLg0KPiANCj4gVGhhbmtzIGZvciByZXBvcnRpbmcg
dGhlIGlzc3VlDQo+IA0KPiAkIHNjcmlwdHMvZ2V0X21haW50YWluZXIucGwgLWYgZnMvYnRyZnMv
dm9sdW1lcy5jDQo+IA0KPiBzdWdnZXN0cyB0byBpbmNsdWRlDQo+IA0KPiAiTWFyZWsgQmVow7pu
IiA8a2FiZWxAa2VybmVsLm9yZz4gKG1haW50YWluZXI6QlRSRlMpIFF1IFdlbnJ1byANCj4gPHdx
dUBzdXNlLmNvbT4gKHJldmlld2VyOkJUUkZTKSBsaW51eC1idHJmc0B2Z2VyLmtlcm5lbC5vcmcN
Cj4gDQo+IHRvIHRoZSBjb21tdW5pY2F0aW9uLg0KPiANCj4gQmVzdCByZWdhcmRzDQo+IA0KPiBI
ZWlucmljaA0KPiANCj4+DQo+PiA9PT0gRVhBTVBMRSAyID09PQ0KPj4gWnlucT4gbG9hZCBtbWMg
MTowIDAgMTZLDQo+PiBbYnRyZnNfZmlsZV9yZWFkLGZzL2J0cmZzL2lub2RlLmM6NzEwXSA9PT0g
cmVhZCB0aGUgYWxpZ25lZCBwYXJ0ID09PSANCj4+IFtidHJmc19yZWFkX2V4dGVudF9yZWcsZnMv
YnRyZnMvaW5vZGUuYzo0NThdIGJlZm9yZSByZWFkX2V4dGVudF9kYXRhIA0KPj4gKHJldCA9IDAs
IHJlYWQgPSAxNjM4NCwgbGVuID0gMTYzODQpIA0KPj4gW3JlYWRfZXh0ZW50X2RhdGEsZnMvYnRy
ZnMvZGlzay1pby5jOjU0N10gYmVmb3JlIF9fYnRyZnNfbWFwX2Jsb2NrIA0KPj4gKGxlbiA9IDE2
Mzg0KSBbcmVhZF9leHRlbnRfZGF0YSxmcy9idHJmcy9kaXNrLWlvLmM6NTUwXSBhZnRlciANCj4+
IF9fYnRyZnNfbWFwX2Jsb2NrIChsZW4gPSAyODY3MikgDQo+PiBbcmVhZF9leHRlbnRfZGF0YSxm
cy9idHJmcy9kaXNrLWlvLmM6NTY1XSBiZWZvcmUgX19idHJmc19kZXZyZWFkIChsZW4gDQo+PiA9
IDE2Mzg0KSBbcmVhZF9leHRlbnRfZGF0YSxmcy9idHJmcy9kaXNrLWlvLmM6NTY4XSBhZnRlciAN
Cj4+IF9fYnRyZnNfZGV2cmVhZCAobGVuID0NCj4+IDE2Mzg0KQ0KPj4gW2J0cmZzX3JlYWRfZXh0
ZW50X3JlZyxmcy9idHJmcy9pbm9kZS5jOjQ2MF0gYWZ0ZXIgcmVhZF9leHRlbnRfZGF0YSANCj4+
IChyZXQgPSAwLCByZWFkID0gMTYzODQsIGxlbiA9IDE2Mzg0KQ0KPj4gY3VyOiAwLCBleHRlbnRf
bnVtX2J5dGVzOiAxNjM4NCwgYWxpZ25lZF9lbmQ6IDE2Mzg0DQo+PiAxNjM4NCBieXRlcyByZWFk
IGluIDEwMCBtcyAoMTU5LjIgS2lCL3MpDQo+Pg0KPj4gPT09IEVYQU1QTEUgMiA9PT0NCj4+IFp5
bnE+IGxvYWQgbW1jIDE6MCAwIDMySw0KPj4gW2J0cmZzX2ZpbGVfcmVhZCxmcy9idHJmcy9pbm9k
ZS5jOjcxMF0gPT09IHJlYWQgdGhlIGFsaWduZWQgcGFydCA9PT0gDQo+PiBbYnRyZnNfcmVhZF9l
eHRlbnRfcmVnLGZzL2J0cmZzL2lub2RlLmM6NDU4XSBiZWZvcmUgcmVhZF9leHRlbnRfZGF0YSAN
Cj4+IChyZXQgPSAwLCByZWFkID0gMzI3NjgsIGxlbiA9IDMyNzY4KSANCj4+IFtyZWFkX2V4dGVu
dF9kYXRhLGZzL2J0cmZzL2Rpc2staW8uYzo1NDddIGJlZm9yZSBfX2J0cmZzX21hcF9ibG9jayAN
Cj4+IChsZW4gPSAzMjc2OCkgW3JlYWRfZXh0ZW50X2RhdGEsZnMvYnRyZnMvZGlzay1pby5jOjU1
MF0gYWZ0ZXIgDQo+PiBfX2J0cmZzX21hcF9ibG9jayAobGVuID0gMTIyODgpIA0KPj4gW3JlYWRf
ZXh0ZW50X2RhdGEsZnMvYnRyZnMvZGlzay1pby5jOjU2NV0gYmVmb3JlIF9fYnRyZnNfZGV2cmVh
ZCAobGVuIA0KPj4gPSAxMjI4OCkgW3JlYWRfZXh0ZW50X2RhdGEsZnMvYnRyZnMvZGlzay1pby5j
OjU2OF0gYWZ0ZXIgDQo+PiBfX2J0cmZzX2RldnJlYWQgKGxlbiA9DQo+PiAxMjI4OCkNCg0KU28g
dGhlIGZpcnN0IDMgc2VjdG9ycyBhcmUgYmVmb3JlIHRoZSBzdHJpcGUgYm91bmRhcnkgYW5kIHdl
IHJlYWQgaXQgY29ycmVjdGx5Lg0KDQo+PiBbYnRyZnNfcmVhZF9leHRlbnRfcmVnLGZzL2J0cmZz
L2lub2RlLmM6NDYwXSBhZnRlciByZWFkX2V4dGVudF9kYXRhIA0KPj4gKHJldCA9IDAsIHJlYWQg
PSAxMjI4OCwgbGVuID0gMzI3NjgpIA0KPj4gW2J0cmZzX3JlYWRfZXh0ZW50X3JlZyxmcy9idHJm
cy9pbm9kZS5jOjQ1OF0gYmVmb3JlIHJlYWRfZXh0ZW50X2RhdGEgDQo+PiAocmV0ID0gMCwgcmVh
ZCA9IDEyMjg4LCBsZW4gPSAzMjc2OCkgDQo+PiBbcmVhZF9leHRlbnRfZGF0YSxmcy9idHJmcy9k
aXNrLWlvLmM6NTQ3XSBiZWZvcmUgX19idHJmc19tYXBfYmxvY2sgDQo+PiAobGVuID0gMTIyODgp
IFtyZWFkX2V4dGVudF9kYXRhLGZzL2J0cmZzL2Rpc2staW8uYzo1NTBdIGFmdGVyIA0KPj4gX19i
dHJmc19tYXBfYmxvY2sgKGxlbiA9IDEyMjg4KQ0KDQpJIGJlbGlldmUgdGhpcyBpcyB0aGUgcHJv
YmxlbS4NCg0KSWYgd2UncmUgcmVhZGluZyB0aGUgZnVsbCAzMkssIGFuZCB0aGUgZmlyc3QgMTJL
IGlzIGluIHRoZSBmaXJzdCBzdHJpcGUsIHdlIHNob3VsZCB0aGVuIHRyeSB0byBtYXAgdGhlIHJl
bWFpbmluZyAyMEssIG5vdCB0aGUgMTJLIGFnYWluLg0KDQpJJ2xsIGxvb2sgaW50byB0aGUgc2l0
dWF0aW9uLg0KQnV0IGlmIHlvdSBjYW4gcHJvdmlkZSB0aGUgaW1hZ2Ugb3IgdGhlIGR1bXAsIGl0
IGNhbiBncmVhdGx5IGhlbHAgdGhlIGRlYnVnZ2luZy4NCg0KVGhhbmtzLA0KUXUNCg0KPj4gW3Jl
YWRfZXh0ZW50X2RhdGEsZnMvYnRyZnMvZGlzay1pby5jOjU2NV0gYmVmb3JlIF9fYnRyZnNfZGV2
cmVhZCAobGVuIA0KPj4gPSAxMjI4OCkgW3JlYWRfZXh0ZW50X2RhdGEsZnMvYnRyZnMvZGlzay1p
by5jOjU2OF0gYWZ0ZXIgDQo+PiBfX2J0cmZzX2RldnJlYWQgKGxlbiA9DQo+PiAxMjI4OCkNCj4+
IFtidHJmc19yZWFkX2V4dGVudF9yZWcsZnMvYnRyZnMvaW5vZGUuYzo0NjBdIGFmdGVyIHJlYWRf
ZXh0ZW50X2RhdGEgDQo+PiAocmV0ID0gMCwgcmVhZCA9IDEyMjg4LCBsZW4gPSAzMjc2OCkNCj4+
IGZpbGU6IGZzL2J0cmZzL2lub2RlLmMsIGxpbmU6IDQ2OA0KPj4gY3VyOiAwLCBleHRlbnRfbnVt
X2J5dGVzOiAzMjc2OCwgYWxpZ25lZF9lbmQ6IDMyNzY4DQo+PiAtLS0tLT4gYnRyZnNfcmVhZF9l
eHRlbnRfcmVnOiAtNSwgbGluZTogNzU4DQo+PiBCVFJGUzogQW4gZXJyb3Igb2NjdXJyZWQgd2hp
bGUgcmVhZGluZyBmaWxlIDMySyBGYWlsZWQgdG8gbG9hZCAnMzJLJw0KPj4NCj4+DQo+Pg0KPj4N
Cj4+DQo+PiBTYW0gV2luY2hlbmJhY2gNCj4+IEVtYmVkZGVkIFNvZnR3YXJlIEVuZ2luZWVyIElJ
SQ0KPj4gVGV0aGVycyBVbmxpbWl0ZWQsIEluYy4gfCBDb25uZWN0IFlvdXIgVW5pdmVyc2UgfCB3
d3cudGV0aGVycy5jb20NCj4+IHN3aW5jaGVuYmFjaEB0ZXRoZXJzLmNvbSB8IEM6IDIwNy05NzQt
NjkzNA0KPj4gMTE3MTEgTm9ydGggQ3JlZWsgUGt3eSAjIEQxMTMsIEJvdGhlbGwsIFdBIDk4MDEx
LTg4MDgsIFVTQQ0KPiANCg==
