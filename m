Return-Path: <linux-btrfs-owner@vger.kernel.org>
X-Original-To: lists+linux-btrfs@lfdr.de
Delivered-To: lists+linux-btrfs@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 4C7086A2B8E
	for <lists+linux-btrfs@lfdr.de>; Sat, 25 Feb 2023 20:55:24 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229534AbjBYTzT (ORCPT <rfc822;lists+linux-btrfs@lfdr.de>);
        Sat, 25 Feb 2023 14:55:19 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:51608 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229470AbjBYTzS (ORCPT
        <rfc822;linux-btrfs@vger.kernel.org>);
        Sat, 25 Feb 2023 14:55:18 -0500
Received: from mout.gmx.net (mout.gmx.net [212.227.17.21])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id AE7611631C
        for <linux-btrfs@vger.kernel.org>; Sat, 25 Feb 2023 11:55:16 -0800 (PST)
Received: from [192.168.1.11] ([24.212.245.158]) by mail.gmx.net (mrgmx104
 [212.227.17.174]) with ESMTPSA (Nemesis) id 1N4hzj-1oXGT73VId-011gUY for
 <linux-btrfs@vger.kernel.org>; Sat, 25 Feb 2023 20:55:15 +0100
Message-ID: <17f8222e-e827-9c83-9202-4aad95a92d8b@gmx.com>
Date:   Sat, 25 Feb 2023 14:55:13 -0500
MIME-Version: 1.0
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101
 Thunderbird/102.8.0
Content-Language: en-US
To:     linux-btrfs@vger.kernel.org
From:   sp339 <sp339@gmx.com>
Subject: linux-btrfs@vger.kernel.org
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V03:K1:OzN4OxIm0LOp8GiBTBoLKDiWx7DbtPCQKlSsBkGoHDSiwQIs831
 Vew709v+seyHMcOannzrkzfSR4oNJoQFT1F1yTwgbV5V8PCXEOEsWOwhB2F8V5/+pkVfScV
 VjpMDN3UGNhvkX69pZGKYBTmNoBD6FuN+bT9yGAt7yrCiE5T2IUmT3nIK/JT3054Z1dokaY
 bS71qqblcSI5oBoibHfWw==
UI-OutboundReport: notjunk:1;M01:P0:c79TBTRCOqY=;d0fVjlJR2pJSor7X8gBVpYOsdH3
 w17GvbXhroy5fB1kK5/0LizeeYShIeNpIEOfelOev0FJRH4+lx4ZLqwdn5yuyrVKkEdW4n2sV
 aU0KKiFXQ9/C0jN80qEKAEWszrLt+x1HnP7tH4B3/PrOvzxTkcI9tNfni9zDnVSLpGUrlnXHW
 A0Q2I1TuOOK48tOG4BeXwtPtax+J3MkpurARyMRQTh+XT9F+mD/aggUNji/1w+UpVfQWL0tSB
 RfVebMUwv9OYfTvn6HQwA7kaihCgh+jkXNMhLXAcQWxffG7Vhde7VF27SZZ3jB/kjrZcrPCeO
 hZkIlO224KwG2VGTeULYC7LBYDPQC+cVmcJwUKW5XRuPMVkeF6oI5mrsWieOt0mraT7XQQJhM
 5piw5EP1RJuPsIuze50KrZQybFqw//fiLm394SuxCEcJgkOPTHNo85phU06jhBJ0utugYQStr
 y2szS+ulKT0QfL+OEsxtHp5seXfVOC4qKZNoViMSjevwMTdBV7/55Nh4earh41GpR4SgoMDnF
 BSDrxeQ7SeAlEPbv6PWPqrjJTB5GbebtX9EKb/uoQGHFh70+7xiVMYvwwLKma3mA13H9VYq89
 HLPdBpc1ehHVGveF7wuHJ++kQFoWywR84rwSew1BnD/+bJpjcR1V3B4kCXbcHLRNHPnfadKjS
 bVwxtPNlic2LCf4KH979oJaCJSw4QT9UyBkCj/8kt7zeitE4w9LwAmlZq/uihtyAvdkGO+P8T
 rB4MJBEE+Pm1zXFn/1ZZm61H0Ol2X4U8NBy45kFNhvu5RyO8O//g8JXhowh0edYsLn0/knIna
 Cv3E/gZDRr9jrxKR/xWpMsnygwzq7AETBmqyc6CZTTUHb256Xj7BcwQIstPkvNpYueQdOm142
 dI2rwcW9PipRbBZ3jzVrrgUQXcNOXgnqa+ckgtxIwLiNKEWVYijylMw4qzOI7DKebmoE3jUqh
 ro2uRJicyV7GlukyUoQa35cOkDY=
X-Spam-Status: No, score=-2.4 required=5.0 tests=BAYES_00,
        FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,
        RCVD_IN_MSPIKE_H2,SPF_HELO_NONE,SPF_PASS autolearn=ham
        autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-btrfs.vger.kernel.org>
X-Mailing-List: linux-btrfs@vger.kernel.org

Hello,

I've just got an error about corrupt leaf. Parts of the system (launcher, krunner, terminal) are frozen, no input works.
I remember also having a similar error a while back. Then, and now, I just rebooted, and system seems ok. After reboot, just did a btrfs scrub ... no error.  Besides that, I'm a btrfs a noob.

I've found in /var/log/syslog:
25/2/23 11:46	 	kernel	[ 1862.643058] BTRFS critical (device sda3): corrupt leaf: root=18446744073709551610 block=1521508843520 slot=66 ino=1002118 file_offset=426127360, file extent end range (560349184) goes beyond start offset (426131456) of the next file extent
25/2/23 11:46	 	kernel	[ 1862.643071] BTRFS info (device sda3): leaf 1521508843520 gen 1468755 total ptrs 179 free space 2321 owner 18446744073709551610
25/2/23 11:46	 	kernel	[ 1862.643552] BTRFS error (device sda3): block=1521508843520 write time tree block corruption detected
25/2/23 11:46	 	kernel	[ 1862.853341] BTRFS: error (device sda3: state AL) in free_log_tree:3424: errno=-5 IO failure
25/2/23 11:46	 	kernel	[ 1862.853352] BTRFS info (device sda3: state EAL): forced readonly
25/2/23 11:46	 	kernel	[ 1862.871326] BTRFS warning (device sda3: state EAL): Skipping commit of aborted transaction.
25/2/23 11:46	 	kernel	[ 1862.871333] BTRFS: error (device sda3: state EAL) in cleanup_transaction:1982: errno=-5 IO failure

sda3 is in raid 0 with sdb1.
sda3 is mounted as : UUID=e442cd9c-bb09-42c6-988c-1958c5249f85 /home         btrfs   defaults,noatime 0 0

Linux  5.19.0-32-generic #33~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Mon Jan 30 17:03:34 UTC 2 x86_64 x86_64 x86_64 GNU/Linux

o.s.: kde neon 5.27.1

btrfs-progs v5.16.2

Label: 'home'  uuid: e442cd9c-bb09-42c6-988c-1958c5249f85
         Total devices 2 FS bytes used 1.69TiB
         devid    1 size 1.81TiB used 1.05TiB path /dev/sda3
         devid    2 size 1.81TiB used 1.05TiB path /dev/sdb1

Data, RAID0: total=2.10TiB, used=1.69TiB
System, RAID0: total=16.00MiB, used=208.00KiB
Metadata, RAID0: total=5.00GiB, used=3.05GiB
GlobalReserve, single: total=512.00MiB, used=0.00B

thanks.
